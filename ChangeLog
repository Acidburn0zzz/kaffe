Mon Jan 11 08:04:55 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* configure.in, libltdl/configure.in (TEST_VERSION): was not
 	accepting autoconf 2.13
	* configure.in (X_LIBS): add $X_PRE_LIBS -lX11 unless $no_x
	(AWT_LIBS): add $X_EXTRA_LIBS unless $no_x
	(AUTOHEADER): add --localdir to AUTOHEADER here,
	* Makefile.am, config/Makefile.am: not here.
	* */configure, */aclocal.m4, */Makefile.in, */stamp-h?.in: regen

Mon Jan 11 04:35:47 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* ltconfig: updated from libtool

Mon Jan 11 04:17:09 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* acinclude.m4, libltdl/acinclude.m4: updated from libtool.m4
	* aclocal.m4, libltdl/aclocal.m4: regen
	* configure, libltdl/configure: regen

Mon Jan 11 03:17:45 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* acconfig.h: moved into config
	* Makefile.am, config/Makefile.am (AUTOHEADER): added --localdir
	* Makefile.in, config/Makefile.in: regen
	
	* configure.in, libltdl/configure.in: accept also autoconf 2.14,
	it's the version number in their CVS tree now
	* configure, libltdl/configure: regen

	* acinclude.m4, ltconfig, libltdl/acinclude.m4: updated from libtool
	* aclocal.m4, libltdl/aclocal.m4: regen
	
	* config/Makefile.am (jit-md.h, md.h): add `else :' to avoid bogus
 	errors from broken shells
	* kaffe/kaffevm/Makefile.am (gc-mem.c, md.c, trampolines.c): ditto
	* kaffe/kaffevm/jit/Makefile.am (icode.h, jit.def): ditto
	* config/Makefile.in, kaffe/kaffevm/Makefile.in: regen
	* kaffe/kaffevm/jit/Makefile.in: ditto

	* include/Makefile.am (KAFFEH_HDRS): $(srcdir) not needed here
	* include/Makefile.in: regen

	* configure.in, libltdl/configure.in (TEST_VERSION): don't
	test version number if program is missing
	* Makefile.am: added required version of automake
	* Makefile.in, config/stamp-h1.in, include/stamp-h2.in: regen

Sun Jan 10 16:58:12 1999  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffevm/hashtab.[ch], kaffe/kaffevm/string.c, 
	kaffe/kaffevm/utf8const.c: removed flags from hashtable.
	kaffe/kaffevm/mem/gc-mem.c: round gc_heap_initial_size up to
	a multiple of pagesize.
	* libraries/clib/awt/X/imggif.c: removed -Wall warnings.

Sun Jan 10 20:13:34 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.automake: note about the snapshot of automake 1.3e I've
 	just taken and the uselessness of EXTRA_CFLAGS, now AM_CFLAGS and
 	AM_CPPFLAGS

Sun Jan 10 19:55:07 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* ltconfig, ltmain.sh: updated from libtool

Sun Jan 10 19:39:55 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.automake: update
	* FAQ/FAQ.libtool: update; notes about --disable-{static,shared}

Sun Jan 10 18:59:57 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* config.guess, config.sub: updated from autoconf
	* install-sh, mkinstalldirs, missing: updated from automake
	* libltdl: updated from libtool
	* configure.in (TEST_VERSION): added temporary dirty hack to avoid 
	using old automake and autoconf
	* libltdl/configure.in (TEST_VERSION): ditto
	* configure, config/stamp-h1.in, include/stamp-h2.in: regen
	* kaffe/kaffevm/intrp/Mkaefile.in: ditto
	* kaffe/kaffevm/systems/unix-internal/Makefile.in: ditto

Sat Jan  9 08:19:58 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.automake: tip to avoid having to update
	autoconf/automake

Sat Jan  9 07:33:26 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/Makefile.am (libkaffevm_la_SOURCES): gc-block.c no 
	longer exists
	* kaffe/kaffevm/Makefile.in: regen

Thu Jan  7 19:27:21 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/systems/oskit-pthreads/Makefile.am: was missing
	* kaffe/kaffevm/systems/Makefile.am: add oskit-pthreads
	* configure.in: generate oskit-pthreads/Makefile
	* Makefile.am, config/Makefile.am (EXTRA_DIST): no wildcards
	* libraries/javalib/Makefile.am, test/Makefile.am: ditto
	* test/regression/Makefile.am: ditto

Thu Jan  7 18:30:35 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.automake, FAQ/FAQ.libtool: some comments about the
	adoption of automake and libtool
	* */Makefile.in: converted to automake makefiles
	* */Makefile.am: the converted files
	* AUTHORS, INSTALL, missing, mkinstalldirs: new files, suggested
 	by automake; should we rename WHATSNEW to NEWS and license.terms
 	to COPYING?
	* config.guess, config.sub: updated
	* acconfig.h: used to build config/config.h.in
	* acinclude.m4: copied from libtool's libtool.m4
	* aclocal.m4: build from acinclude.m4
	* ltconfig, ltmain.sh: copied from libtool
	* config/regen-forward: script used to generate #include-style
	pseudo-link files
	* config/stamp-h1.in, include/stamp-h2.in: timestamp files for
	config/config.h.in and include/jtypes.h.in, created by automake
	* config/*/*/config.frag: removed all object and shared-library
	related configurations; they're all left up to libtool now.
	* */lib*.def: removed, libtool takes care of everything
	* configure.in: major simplifications with the addition of libtool
	* configure, config/config.h.in, include/java_lang_Thread.h: regen 
	* libltdl: new directory, with libtool portable dlopening library
	* kaffe/kaffe/main.c: added call to libltdl function to allow for
	dlopening simulation in case of static linking
	* kaffe/kaffevm/external.c: use libltdl for dynamic linking
	* libraries/clib/native/Runtime.c: look for libtool archives
	* kaffe/kaffevm/readClass.c: adapted to #include forwarder
	* kaffe/scripts/kaffe.in: moved the Kaffe binary into libexec, to
	avoid clashes with the script on MS-Windows
	* test/regression/TestScript.in: may run before installation now
	* test/regression/TestScriptThread.in: likewise
	
Thu Jan  7 01:47:59 1999  Raffaele Sena <raff@aromatic.com>,
			  Dirk Grunwald <grunwald@pa.dec.com>
	
	* config/arm/common.h: floating point related fixes for Itsy.

Thu Jan  7 01:40:40 1999  Godmar Back  <gback@cs.utah.edu>

	* libraries/clib/native/Runtime.c: fixed typo pointed out by
	Aaron Place <beavis@ihug.co.nz>
	* libraries/clib/native/Double.c: throw right exception in value0
	as pointed out by Moses DeJong <dejong@cs.umn.edu>

Wed Jan  6 15:50:32 1999  Jason Baker  <jbaker@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-block-hash.[ch]: removed from CVS repos.
	kaffe/kaffevm/mem/gc-block-mmap.[ch]: merged in gc-mem.c
	configure, configure.in, FAQ/FAQ.gcblock
	kaffe/kaffevm/Makefile.in, kaffe/kaffevm/mem/gc-incremental.c
	kaffe/kaffevm/mem/gc-mem.[ch]: 
	- removed old hash-based allocation scheme in favor of new,
	address-arithmetic based scheme.

Wed Jan  6 11:04:00 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.h: test for zero class->name in
	CLASS_IS_ARRAY.  Fixed segfault problem in walkClass reported
	by Leigh Stoller.

Wed Jan  6 00:48:47 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/gc.h, kaffe/kaffevm/hashtab.[ch],
	kaffe/kaffevm/object.c, kaffe/kaffevm/string.c,
	kaffe/kaffevm/stringSupport.h, kaffe/kaffevm/utf8const.c,
	kaffe/kaffevm/mem/gc-incremental.c,
	kaffe/kaffevm/mem/gc-mem.c:
	libraries/clib/native/String.c, 
	libraries/javalib/java/lang/String.java:  
	- implemented special handling of java.lang.String objects.
	- fixed invokeGC().

Tue Jan  5 11:33:02 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffe/main.c: made -ms/-mx/-ss sun-compatible, added -as
	to allow specifying heap increment.
	* kaffe/kaffevm/mem/gc-incremental.c,
	kaffe/kaffevm/mem/gc-mem.[ch] implemented -ms properly, setting
	default to 5MB.  Improved gc strategy some more, as described in
	FAQ/FAQ.gcstrategy.

Tue Jan  5 10:31:41 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/paths.h: removed; it's duplicated in
	include/system.h
	* include/system.h (file_seperator, path_seperator,
	line_seperator): fixed spelling
	* libraries/clib/native/System.c: ditto
	* libraries/clib/io/File.c: ditto
	* kaffe/kaffevm/external.c: use system.h instead of paths.h
	* kaffe/kaffevm/findInJar.c: ditto
	* configure.in: extract pathsep and dirsep from system.h
	* kaffe/scripts/kaffe.in (PATHSEP): use it to define CLASSPATH,
	KAFFELIBRARYPATH and LD_LIBRARY_PATH

Tue Jan  5 07:27:32 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffeh/support.c (binary_open): new function that adds
	O_BINARY to the open mode
	(Kaffe_SystemCallInterface): use binary_open instead of open

Mon Jan  4 23:00:34 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/jit/machine.c: added jit_time timer/counter.
	Right now this is only meaningful if no gc occurs.
	* kaffe/kaffevm/mem/gc-incremental.c, kaffe/kaffevm/mem/gc-mem.c:
	Changed strategy to trigger gc.  Hoisted lock/unlock out if
	sweep loop.  Added sweep timer.  Changed verbosegc output.
	* kaffe/kaffevm/classMethod.c: fixed bug with <clinit> for 
	interfaces.
	* kaffe/kaffevm/systems/unix-jthreads/*: reshuffling.

Mon Jan  4 15:28:45 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/exception.c: set up sa_mask in catchSignal to
	avoid preempting signal handlers which could lead to lost
	signals.

Mon Jan  4 14:38:30 1999  Leigh Stoller <stoller@cs.utah.edu>, 
			  Godmar Back <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/oskit-pthreads: support for OSKit's pthreads
	implementation.  This is a pthreads superset with hooks for gc.
	* config/i386/oskit: added OS Kit port

Sun Jan  3 15:22:22 1999  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/jar.c:  added O_BINARY flag for Windoze.
	* libraries/clib/native/Double.c: improved error handling for 
	Double.valueOf, handle empty strings better.
	test/regression/DoubleBug.java: test for that.
	* kaffe/kaffevm/external.c, baseClasses.c: cosmetic changes.
	* kaffe/kaffevm/classMethod.[ch], kaffe/kaffevm/code.c,
	kaffe/kaffevm/gc.h, kaffe/kaffevm/kaffe.def,
	kaffe/kaffevm/readClassConfig.h, kaffe/kaffevm/support.h
	kaffe/kaffevm/utf8const.c, kaffe/kaffevm/mem/gc-incremental.[ch]
	kaffe/kaffevm/mem/gc-mem.h, kaffe/kaffevm/jit/machine.c:
	- adapted class garbage collection to properly work with Archie's 
	  utf8 reference counting.
	- reintroduced utf8 allocation type for statistical purposes.
	- added (C++ like) destructor functions for gc objects.
	- turned off eager loading of strings by default (the CONSTINIT state 
	  is redundant now.)
	- changed ordering of gc allocation types some to visualize grouping.
	- walk fields and methods of a class from within walkClass.
	- converted more elements of classes, methods, and fields to be 
	  either explicitly freed or at least precisely walked.
	  Only jitcode is still walked conservatively.

Sun Jan  3 11:51:52 1999  Archie Cobbs <archie@whistle.com>

	* test/regression/Reflect.{java,out}: don't display final keyword
	for methods in a final class (this fixes this test when jikes is
	used to build Klasses.jar).

Sat Jan  2 14:16:14 1999  Godmar Back <gback@cs.utah.edu>

	* libraries/clib/awt/X/imgjpeg.c: initialized local var img to zero
	to avoid undefined results when JPEG library is not available.
	* libraries/javalib/java/awt/widgets/TextArea.java: fixed typo.

Mon Dec 28 17:40:44 1998  Edouard Parmelan <EP510777@exchange.FRANCE.NCR.com>

	* kaffe/kaffevm/findInJar.c: avoid KMALLOC() of zero bytes
	* kaffe/kaffevm/hashtab.c: make DELETED compiler optimizable constant
	* kaffe/kaffevm/utf8const.c: fix typo
	* libraries/clib/native/Array.c: terminate array with -1, not zero
	* libraries/javalib/java/io/FilterInputStream.java: reapply
	bug fix clobbered by TVT merge
	* libraries/javalib/kaffe/applet/AppletViewer.java: avoid null
	* libraries/clib/io/FileInputStream.c: don't use st_size unless
	the file is a regular file.

Mon Dec 28 17:18:40 1998  Archie Cobbs <archie@whistle.com>

	* configure configure.in test/regression/TestScript{Thread}.in
	test/regression/*.out test/Makefile.in: detect and use jikes if
	available and separate each test's output into a separate
	individual file.
	* test/regression/TestScript{Thread}: remove
	* libraries/javalib/java/net/DatagramPacket.java: don't
	leave address as null, even if we can't find one, otherwise
	UDPTest fails on machines with only a loopback IP address.

Sat Dec 26 17:59:40 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffeh/constants.c kaffe/kaffevm/baseClasses.c
	kaffe/kaffevm/classMethod.c kaffe/kaffevm/classMethod.h
	kaffe/kaffevm/constants.c kaffe/kaffevm/gtypes.h
	kaffe/kaffevm/itypes.c kaffe/kaffevm/jni.c
	kaffe/kaffevm/mem/gc-incremental.c kaffe/kaffevm/string.c
	kaffe/kaffevm/stringSupport.h kaffe/kaffevm/support.c
	kaffe/kaffevm/utf8const.c libraries/clib/native/Class.c
	libraries/clib/native/ClassLoader.c
	libraries/clib/native/ObjectInputStream.c
	libraries/clib/native/ObjectOutputStream.c
	libraries/clib/native/ObjectStreamClass.c:
	Implement reference counting scheme for Utf8Consts

Tue Dec 22 10:30:16 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffeh/Makefile.in: fix bugs reported by Raffaele Sena
	* kaffe/kaffevm/hashtab.c: tweaks suggested by Edouard

Mon Dec 21 23:30:26 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/hashtab.c kaffe/kaffevm/hashtab.h
	kaffe/kaffevm/string.c kaffe/kaffevm/stringSupport.h
	kaffe/kaffevm/utf8const.c: New files for interning
	* include/jmalloc.h include/native.h kaffe/kaffeh/Makefile.in
	kaffe/kaffeh/constants.c kaffe/kaffeh/constants.h
	kaffe/kaffeh/readClassConfig.h kaffe/kaffeh/support.c
	kaffe/kaffevm/Makefile.in kaffe/kaffevm/baseClasses.c
	kaffe/kaffevm/baseClasses.h kaffe/kaffevm/classMethod.c
	kaffe/kaffevm/classMethod.h kaffe/kaffevm/code-analyse.c
	kaffe/kaffevm/constants.c kaffe/kaffevm/constants.h
	kaffe/kaffevm/errors.h kaffe/kaffevm/exception.c
	kaffe/kaffevm/external.c kaffe/kaffevm/findInJar.c kaffe/kaffevm/gc.h
	kaffe/kaffevm/gtypes.h kaffe/kaffevm/itypes.c
	kaffe/kaffevm/jit/basecode.c kaffe/kaffevm/jit/icode.c
	kaffe/kaffevm/jit/machine.c kaffe/kaffevm/jni.c
	kaffe/kaffevm/libkaffevm.def kaffe/kaffevm/locks.c
	kaffe/kaffevm/locks.h kaffe/kaffevm/lookup.c
	kaffe/kaffevm/mem/gc-incremental.c kaffe/kaffevm/readClass.c
	kaffe/kaffevm/readClassConfig.h kaffe/kaffevm/soft.c
	kaffe/kaffevm/support.c kaffe/kaffevm/support.h kaffe/kaffevm/thread.c
	libraries/clib/io/AudioPlayer.c libraries/clib/io/File.c
	libraries/clib/io/FileInputStream.c
	libraries/clib/io/FileOutputStream.c
	libraries/clib/io/RandomAccessFile.c
	libraries/clib/management/Classpath.c libraries/clib/native/Class.c
	libraries/clib/native/ClassLoader.c libraries/clib/native/DateFormat.c
	libraries/clib/native/Double.c libraries/clib/native/Float.c
	libraries/clib/native/Method.c
	libraries/clib/native/ObjectInputStream.c
	libraries/clib/native/ObjectOutputStream.c
	libraries/clib/native/ObjectStreamClass.c
	libraries/clib/native/Runtime.c libraries/clib/native/String.c
	libraries/clib/native/ZipFile.c libraries/clib/net/InetAddressImpl.c
	test/regression/InternHog.java:
	Merge in revamped Utf8Const and string handling:
	  - Intern all UTF-8 constants
	  - Overhaul interning of String objects
	  - Add generic intern hashtable library to support interning
	  - Changed a zillon 'char *' to 'const char *'
	  - Consolidated string-related declarations into new header
	    file "stringSupport.h"
	  - Give string and utf8 functions more consistent names

Tue Dec 22 00:16:58 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/code-analyse.c: initialize native pcs with -1.
	kaffe/kaffevm/jit/machine.c: fixed bug where translator assumed
	that bytecode instructions at the start/end/handler (bytecode) pc 
	of an exception table entry had a valid (native) pc.  

Sun Dec 20 17:19:12 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/man/kaffe.1.in: need to substitute @prefix@
	* test/regression/TestScript: fix problem compiling ClassGC
	* kaffe/kaffevm/classMethod.c: Edouard's fix for static
	methods of interfaces. Makes javap work again.

Sun Dec 20 10:34:21 1998  Godmar Back  <gback@cs.utah.edu>

	* config/i386/jit-i386.def: added debug() to nop instruction.
	* kaffe/kaffevm/locks.h: added staticLockIsInitialized macro
	* kaffe/kaffevm/classMethod.c, kaffe/kaffevm/findInJar.c,
	kaffe/kaffevm/jit/machine.h: eliminated local init variables
	in favor of staticLockIsInitialized.
	* kaffe/kaffevm/jni.c, kaffe/kaffevm/jit/machine.c: protected
	translator when called from Kaffe_JNI_Wrapper.  New functions
	enterTranslator() and leaveTranslator().
	* kaffe/kaffevm/jit/icode.c: fixed warning in softcall_lookupmethod
	* kaffe/kaffevm/jit/machine.c: added code to align function call 
	entry points.  This code depends on the MD macro CALLTARGET_ALIGNMENT.
	* config/i386/jit.h: defined CALLTARGET_ALIGNMENT to 16 according
	to Pentium II optimization manual.  Since we don't have gc_memalign, 
	we must allocate 8 more bytes in jit/machine.c.

Sat Dec 19 17:31:22 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/awt/Component.java: use Toolkit.class
	instead of Toolkit.singleton as tree lock to prevent deadlock.

Sat Dec 19 14:36:27 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/gtypes.h: remove unused "utf8str" typedef
	* kaffe/kaffevm/string.c, configure[.in], config/config.h.in:
	don't need to detect or add strdup(), it's not used anywhere
	* libraries/clib/native/ClassLoader.c: fix buffer overflow
	bug when string length == 100
	* kaffe/kaffevm/jni.c: fix bugs in Kaffe_GetStringUTFLength()
	and Kaffe_GetStringUTFChars().
	* include/java_lang_System.h, kaffe/kaffevm/baseClasses.h,
	libraries/clib/native/ClassLoader.c, kaffe/kaffevm/jni.c:
	get rid of javaStringLength() macro; use STRING_SIZE() instead
	* kaffe/kaffevm/string.c: fix bug where interned strings were
	not getting removed from hash table upon finalization.
	* test/regression//InternHog.java: new test file
	* test/regression/TestScript: add InternHog test

Sat Dec 19 12:12:22 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.[ch], kaffe/kaffevm/kaffe.def,
	kaffe/kaffevm/soft.[ch], kaffe/kaffevm/intrp/icode.h,
	kaffe/kaffevm/jit/icode.c, kaffe/kaffevm/mem/gc-incremental.c:
	compute and store dispatch method indices in table to allow for
	faster lookup in soft_lookupmethod.  This avoids the sillyness of
	calling findMethod every time an INVOKEINTERFACE bytecode instruction
	is executed.
	Also, added throw statements if we find a class without finalizer or
	if an interface class does not have java.lang.Object as its superclass,
	as the JLS says it should.
	Don't mark classes if they don't have a loader -- they're anchored.

Fri Dec 18 17:05:52 1998  Jason Baker  <jbaker@cs.utah.edu>

        * New improved version of gc-block mmap scheme.
        kaffe/kaffevm/slib.h: removed LIBRARYADDR, it's no longer needed.
	kaffe/kaffevm/support.h: added MIN/MAX.
        kaffe/kaffevm/mem/gc-incremental.[ch], gc-mem.[ch]: moved locking into
        gc-incremental.
        kaffe/kaffevm/mem/gc-block-mmap.[ch]: new, more portable, scheme.
	configure.in: config/config.h.in: check for mprotect and madvise.
	Remove test for mmap.
	FAQ/FAQ.gcblock: update to describe the latest changes.

Fri Dec 18 09:01:07 1998  Jim Flowers <flowers@aligninc.com>

	* libraries/clib/management/Makefile.in, 
	libraries/clib/net/Makefile.in: fixes for Win32/Cygwin.

Fri Dec 18 08:56:10 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-incremental.c: rename MARK_OBJECT to
	MARK_OBJECT_PRECISE to make clear that it marks objects precisely
	without invoking gc_heap_isobject.
	* kaffe/scripts/Makefile.in: create bindir in install-pizza target.

Fri Dec 18 08:45:05 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* kaffe/kaffevm/readClassConfig.h: avoid allocating zero-length
	Method arrays.
	* kaffe/kaffevm/mem/gc-incremental.c: detect attempts to allocate
	zero-sized objects.  Fix for marking trampolines in walkMethod.

Fri Dec 18 08:43:05 1998  Leigh Stoller  <stoller@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-mem.c: fixed race condition where gc_heap_total
	was incremented prematurely.  (This was only relevant for gcblock=mmap.)

Fri Dec 18 01:29:10 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/mem/gc-incremental.c (walkPrimArray): defined to 
	walkNull
	(gcFunctions): unify it into a single list; use finalizeClass for
	interfaces too; use walkPrimArray (i.e., walkNull) for arrays of
	primitive types
	(MARK_OBJECT): new macro to ease calling markObjectDontCheck
	call MARK_OBJECT where appropriate, except where it introduces 
	crashes: race conditions?

Thu Dec 17 13:53:38 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* config/*/*/md.h:  declared init_md to avoid -Wall warnings.
	libraries/clib/awt/X/*.c:  more -Wall fixes.
	* libraries/javalib/java/util/Vector.java: implemented toArray.

Thu Dec 17 13:22:59 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/ClassLoader.java: keep all loaded
	classes in hashtable to prevent losing them prematurely.
	* libraries/clib/native/ClassLoader.c: removed INTERNUTF8 defines and
	fixed memory leak in findSystemClass.
	* kaffe/kaffevm/code-analyse.c: replaced gc_free with KFREE for
	consistency.
	* kaffe/kaffevm/classMethod.c: don't free arr_name in lookupArray.
	* kaffe/kaffevm/mem/gc-mem.c, kaffe/kaffevm/mem/gc-incremental.h: 
	removed call/declaration of objectStatsPrint and made it static.
	* kaffe/kaffevm/mem/gc-incremental.c: introduced RECORD_MARKED
	macro for keeping statistics on how many objects we mark.
	Complain if VM attempts to explicitly free non-fixed objects.

Wed Dec 16 10:52:18 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/util/Random.java: implemented according 
	to JLS, passes mauve now.
	* libraries/javalib/kaffe/io/CharToByteConverter.java: ignore
	file.encoding.pkg as for ByteToCharConverter
	* libraries/javalib/kaffe/io/CharToByteConverter.java, 
	ByteToCharConverter.java: consult ConverterAlias for alternate names
	* libraries/javalib/kaffe/io/ConverterAlias.java: find alternate
	names for certain encodings.
	* kaffe/kaffevm/*: libraries/clib/native/ClassLoader.c,
	libraries/javalib/java/lang/ClassLoader.java: 
	implemented class garbage collection.
	* test/regression/ClassGC.java, ClassGCTest.java: basic test for
	class gc.

Tue Dec 15 23:16:40 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/lookup.[ch], kaffe/kaffevm/exception.[ch]:
	moved findExceptionBlockInMethod and findExceptionInMethod from
	lookup.c to exception.c and made it static.
	Patched bug where unresolved catch classes caused recursive
	exceptions.
	* test/regression/ExceptionTestClassLoader.java, ExceptionTest.java,
	ExceptionTestClassLoader2.java:  tests adopted from Ben Reed 
	<breed@almaden.ibm.com> for this and the bug were pending exceptions
	weren't stored when loadClass was called.
	* config/arm/netbsd1/config.frag: removed hardcoding of threading
	system since jthreads seems to work now.

Tue Dec 15 22:13:46 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in (KAFFE_DEBUG): find `GDB' or `GNU gdb'
 	anywhere in the `--version' output, not only in the beginning

Tue Dec 15 16:11:24 1998  Archie Cobbs <archie@whistle.com>

	* configure, configure.in: use -lgcc on FreeBSD and NetBSD
	platforms as a better workaround for the modulo bug.
	* kaffe/kaffevm/soft.c: remove previous (slower) workaround.

Tue Dec 15 14:11:32 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.h: made state signed char cause we
	use -1 as a value.
	* test/regression/HashtableTest1.java: a test for a recent hashtable fix

Tue Dec 15 01:22:27 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.c: save and restore pending exceptions
	when invoking classloader.
	libraries/clib/native/Method.c:  process class if needed.
	Thanks to Benjamin Reed for helping to uncover these two bugs.

Mon Dec 14 15:48:32 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: fixed race between
	exiting threads and asynchronous cancellation requests.
	* test/regression/InitTest.java: new test.

Mon Dec 14 13:20:30 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/awt/widgets/List.java: fix for updateFlyOver.

Mon Dec 14 10:55:26 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/BufferedInputStream.java: rewrite
	class to eliminate some bugs and optimize performance
	* test/regression/MarkResetTest.java: added new test

Sun Dec 13 14:47:44 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Integer.java: throw NumberFormatException
	when parseInt is called with null, as spec demands.
	* libraries/javalib/java/net/URLConnection.java: don't ignore 
	NullPointerException resulting from calls to Integer.parseInt.
	* libraries/javalib/kaffe/io/ByteToCharConverter.java: ignore 
	"file.encoding.pkg" property for now.  See comment there.
	* kaffe/kaffevm/lookup.c: avoid throwing exceptions if catch classes
	could not be resolved.
	* libraries/javalib/java/io/BufferedInputStream.java: throw more
	informative error message when reset() fails.
	* kaffe/kaffevm/code-analyse.c: tell getMethodSignatureClass to load
	eagerly.
	* kaffe/kaffevm/stackTrace.[ch], libraries/clib/native/Class.c,
	libraries/clib/native/ObjectInputStream.c, 
	libraries/clib/native/SecurityManager.c: compute method from pc
	when examining backtrace.  This fixes a bug introduced by me
	on Tue Nov 24.

Sat Dec 12 19:04:18 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.c: fixed loadClass to not overwrite
	clazz->centry with initiating classloader.  Was pointed out by
	Ben Reed <breed@almaden.ibm.com>.  Implemented name check.
	* test/regression/CLTestLie.java: new test for name check.
	* libraries/javalib/java/util/Properties.java: 
	handle header == null in Properties.save.
	* kaffe/kaffevm/stackTrace.c: make sure we find line numbers
	even if start_pc == 0 (which can happen in the interpreter)
	* libraries/javalib/java/io/StreamTokenizer.java: fixed bug where
	whitespaces including \n were skipped even though EOL was significant.
	Avoid pushing back EOF because it comes back as 65535.
	* libraries/javalib/java/lang/SecurityManager.java: added deprecated
	inCheck variable.
	* libraries/javalib/java/lang/reflect/Modifier.java: changed 
	toString to print modifiers in proper order.
	* config/config-math.h, config/config.h.in, 
	libraries/clib/native/Math.c: check for and use rint() for Math.rint()

Sat Dec 12 10:46:44 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/external.[ch], kaffe/kaffevm/support.c: changed
	signature of native to take errorInfo.
	kaffe/kaffevm/jit/machine.c: moved call to verifier out of 
	translatorlock.
	* test/regression/CLTestJLock.java, TestScript:  test for that
	translator lock fix.
	* libraries/clib/awt/X/clr.c: include "config-std.h" to fix broken
	compile.

Sat Dec 12 05:59:21 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* include/Makefile.in (INCLUDEFILES): remove trailing backslash
	from last line, this break some dumb makes

Sat Dec 12 05:48:17 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* test/regression/TestScript (echo_n_sp): portable echo -n
	* test/regression/TestScriptThread (echo_n_sp): ditto

Fri Dec 11 22:55:41 1998  Archie Cobbs <archie@whistle.com>

      * config/alpha/jit-alpha.def include/jmalloc.h include/jsyscall.h
      include/native.h kaffe/kaffeh/constants.c
      kaffe/kaffeh/kaffeh-support.h kaffe/kaffeh/support.c
      kaffe/kaffevm/classMethod.c kaffe/kaffevm/code-analyse.c
      kaffe/kaffevm/code-analyse.h kaffe/kaffevm/external.c
      kaffe/kaffevm/findInJar.c kaffe/kaffevm/gc.c kaffe/kaffevm/gc.h
      kaffe/kaffevm/inflate.c kaffe/kaffevm/jar.c kaffe/kaffevm/jni.c
      kaffe/kaffevm/soft.c kaffe/kaffevm/string.c kaffe/kaffevm/support.c
      kaffe/kaffevm/support.h kaffe/kaffevm/jit/constpool.c
      kaffe/kaffevm/jit/icode.c kaffe/kaffevm/jit/labels.c
      kaffe/kaffevm/jit/machine.c kaffe/kaffevm/jit/seq.c
      kaffe/kaffevm/jit/slots.c
      kaffe/kaffevm/systems/unix-internal/internal.c
      kaffe/kaffevm/systems/unix-internal/internalCalls.c
      kaffe/kaffevm/systems/unix-jthreads/internal.c
      kaffe/kaffevm/systems/unix-jthreads/jthread.h
      libraries/clib/awt/X/clr.c libraries/clib/awt/X/evt.c
      libraries/clib/awt/X/gra.c libraries/clib/awt/X/img.c
      libraries/clib/awt/X/imggif.c libraries/clib/awt/X/imgpng.c
      libraries/clib/awt/X/tlk.c libraries/clib/awt/X/toolkit.h
      libraries/clib/io/AudioPlayer.c libraries/clib/io/File.c
      libraries/clib/io/FileInputStream.c
      libraries/clib/io/FileOutputStream.c
      libraries/clib/io/RandomAccessFile.c libraries/clib/native/Array.c
      libraries/clib/native/Class.c libraries/clib/native/ClassLoader.c
      libraries/clib/native/ObjectInputStream.c
      libraries/clib/native/ObjectStreamClass.c
      libraries/clib/native/UNIXProcess.c libraries/clib/native/ZipFile.c
      libraries/clib/net/PlainDatagramSocketImpl.c
      libraries/clib/net/PlainSocketImpl.c libraries/clib/zip/Deflater.c
      libraries/clib/zip/Inflater.c: replace jmalloc.h and jsyscall.h
      macros with more intuitive names; a few other misc cleanups.

Fri Dec 11 22:54:09 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/object.c, kaffe/kaffevm/mem/gc-incremental.c:
	reintroduced non-finalizer allocation types.
	* libraries/clib/native/Thread.c, 
	libraries/javalib/java/lang/Thread.java: implemented clever new
	way of finalizing threads suggested by Alexandre. 

Fri Dec 11 18:38:52 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-block-hash.c, include/jmalloc.h,
	kaffe/kaffe/main.c, libraries/clib/awt/X/*.c,
	libraries/clib/io/AudioPlayer.c, libraries/clib/io/File.c,
	libraries/clib/math/BigInteger.c, libraries/clib/native/*.c,
	libraries/clib/zip/Deflater.c, libraries/clib/zip/Inflater.c:
	removed dangerous #redefine of malloc, calloc, and free and replaced
	it with calls to jmalloc, jcalloc, and jfree where appropriate.

Fri Dec 11 18:36:52 1998  Jason Baker  <jbaker@cs.utah.edu>

	* config/i386/common.h, config/sparc/common.h,
	kaffe/kaffevm/support.[ch]:  simplified sysdepCallMacro.
	Improved timing system.

Fri Dec 11 09:40:17 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.[ch], kaffe/kaffevm/mem/gc-incremental.c:
	don't waste time invoking empty finalizers.

Fri Dec 11 14:14:45 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/clr.c: memmove is missing on SunOS4, get
	alternate definition from config-mem.h

Fri Dec 11 07:26:29 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/awt/Window.java: changed == to != in 
	removeNotify

Fri Dec 11 07:16:14 1998  Mark Huizer <xaa@xaa.iae.nl>

	* libraries/javalib/java/awt/ScrollPane.java: made SCROLLBARS_ 
	constants public.

Thu Dec 10 23:43:33 1998  Mark Lentczner <markl@glyphic.com>
 
	* libraries/javalib/java/io/DataInputStream.java: fixed typo in read

Thu Dec 10 23:33:39 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/internal.c: fixed race condition
	pointed out by Leigh Stoller <stoller@cs.utah.edu>
	* libraries/javalib/java/lang/ThreadGroup.java: made essential
	methods synchronized.

Thu Dec 10 22:07:44 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/jni.c (maxLocal): declare it
	(Kaffe_JNI_wrapper): define maxLocal to ensure that args passed in 
	registers are spilled when needed

Thu Dec 10 11:40:11 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/intrp/machine.c: fix handling of synchronized
	methods so that locks are unlocked when exception is thrown.
	* kaffe/kaffevm/locks.c, kaffe/kaffevm/systems/unix-jthreads/jthread.c:
	improved debugging.
	* kaffe/kaffevm/jni.c: use exitThread instead of stopThread
	* kaffe/kaffevm/thread.c: fixes for stopThread.  Use JNI to invoke
	uncaughtException.
	* libraries/clib/native/Thread.c: added null pointer check to stop.
	* libraries/javalib/java/lang/ThreadGroup.java: fixed uncaughtException
	* libraries/javalib/java/lang/ClassLoader.java, 
	kaffe/kaffevm/classMethod.c: removed ClassLoader.loadClassVM,
	fixed loadClass to use JNI, handle errors and handle thread dying 
	in loadClass.
	* kaffe/kaffevm/soft.c: fixed long remainder prob for FreeBSD.
	* kaffe/kaffevm/code-analyse.c, kaffe/kaffevm/jit/labels.[ch],
	kaffe/kaffevm/jit/machine.[ch]: made verifier reentrant.
	guarded translator against reentering by moving all loading to
	the (now) reentrant verifier.
	* kaffe/test/regression/TestScript: adapted to handle deprecated and
	sorted tests.  New tests for all the bug fixes:
	CLTestConc.java, CLTestConc_run.java, LostFrame.java, TestUnlock.java,
	UncaughtException.java

Thu Dec 10 16:32:00 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/math/BigInteger.c: undef calloc too

Wed Dec  9 22:01:05 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/errors.h kaffe/kaffevm/exception.c
	kaffe/kaffevm/exception.h kaffe/kaffevm/findInJar.c
	include/jni.h kaffe/kaffevm/soft.c kaffe/kaffevm/support.c
	kaffe/kaffevm/support.h libraries/clib/native/Class.c
	libraries/clib/native/Method.c libraries/clib/awt/X/img.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/img.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/evt.c
	libraries/clib/awt/X/imggif.c libraries/clib/awt/X/imgjpeg.c
	libraries/clib/awt/X/clr.c libraries/clib/awt/X/gra.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/imgpng.c
	libraries/clib/awt/X/toolkit.h: eliminate compiler warnings
	* libraries/javalib/Klasses.jar: synchronize

Wed Dec  9 18:41:09 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Cloneable.java
	kaffe/kaffeh/Makefile.in, kaffe/kaffevm/baseClasses.c,
	kaffe/kaffevm/debug.h, kaffe/Makefile.in: added consistency check
	between Klasses.jar found at run-time and the one at compile-time.

Wed Dec  9 18:44:36 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/io/AudioPlayer.c: oops, config-std.h needs
	config.h on some platforms

Wed Dec  9 11:08:35 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/io/AudioPlayer.c: include config-std.h before
 	jni.h, so as to prevent malloc from being defined when stdlib is
 	included

Tue Dec  8 23:53:51 1998  Archie Cobbs <archie@whistle.com>

	* test/regression/ModuloTest.java: add test for the 64 bit
	negative modulo bug noticed in FreeBSD
	* Slurp in @datadir@/share/kafferc and ${HOME}/.kafferc
	* Update neglected kaffe(1) man page.

Tue Dec  8 13:48:02 1998  Raffaele Sena <raff@aromatic.com>

	* config/arm/linux/config.frag: allowed for use of shared libraries. 

Tue Dec  8 13:46:05 1998  Leigh Stoller <stoller@cs.utah.edu>

	* kaffe/kaffevm/jar.c: fall back to read if mmap fails.
	kaffe/kaffevm/mem/gc-block-mmap.h: allow for machine-specific 
	definitions of gc_heap_base.

Tue Dec  8 11:58:47 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/file.h, kaffe/kaffevm/findInJar.c
	libraries/clib/native/ClassLoader.c: fixed missing declaration of
	findInJar, removed unused init function from ClassLoader.c
	Avoid creating empty class entries in findLoadedClass0.
	* kaffe/kaffevm/classMethod.c: added lookupClassEntryInternal.

Tue Dec  8 09:55:42 PST 1998 Transvirtual Technologies <info@transvirtual.com>

        * Version 1.0.b3 of Kaffe OpenVM released.

Tue Dec  8 09:20:16 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/code-analyse.c: don't print warnings for unreached
	basic blocks, as suggested by Edouard.

Tue Dec  8 09:10:20 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/Long.java, Integer.java: fixes to
	toXXXString methods.

Mon Dec  7 23:18:07 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/inflate.c: free inflateInfo after use, reported
	by Jongwon Kim <freefish@chollian.net>

Mon Dec  7 18:08:19 PST 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/{net,io}/Makefile.in: fix some breakage
	with make depend, make derived-files, and INSTROOT
	* includes/java_lang_Thread.h: sync exceptObj with class file
	* kaffe/kaffevm/exception.c, kaffe/kaffevm/jni.c: adjust
	for new type of (struct Hjava_lang_Thread*)->execptObj.

Mon Dec  7 16:47:23 PST 1998	Tim Wilkinson <tim@transvirtual.com>

	* Merged in Transvirtual's current snapshot.  The changes are
	  large and various.  AWT now supports Swing and 1.0 events.

Mon Dec  7 17:13:01 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Boolean.java: have hashCode return
	the value mauve thinks is right.
	* libraries/javalib/java/lang/String.java: fixes for indexOf and
	lastIndexOf so that mauve's string tests pass.

Mon Dec  7 13:11:20 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/locks.c: fixed race condition in newLock where
	uninitialized locks were used.  
	Found by Leigh Stoller <stoller@cs.utah.edu>

Sun Dec  6 22:52:10 1998  Godmar Back  <gback@cs.utah.edu>

	* include/java_lang_Thread.h, libraries/javalib/java/lang/Thread.java,
	kaffe/kaffevm/{jit|intr}/machine.c kaffe/kaffevm/exception.[ch]:
	test/regression/Overflow.java:
	implement stack overflow error properly.  JIT part was submitted 
	by Edouard.
	* kaffe/kaffevm/thread.[ch], libraries/clib/native/Thread.c,
	kaffe/kaffevm/systems/unix-jthreads/internal.c, jthread.c
	libraries/javalib/java/lang/Object.java: implemented Thread.interrupt().
	test/regression/ThreadInterrupt.java: new test for Thread.interrupt()
	kaffe/kaffevm/systems/unix-internal/internal.c: added stub.

Fri Dec  4 13:51:58 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/beans/Introspector.java:
	libraries/javalib/java/beans/IndexedPropertyDescriptor.java:
	small fixes for mauve.

Thu Dec  3 22:58:25 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/StringBuffer.java: redid setLength
	as pointed out by Johannes Deisenhofer <joe@dillingen.baynet.de>
	* libraries/javalib/java/lang/Character.java: added partial isDefined
	and fixed typo in isIdentifierIgnorable.

Thu Dec  3 21:00:25 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.gcblock: renamed `old' to `hash' and `new' to `mmap'
	* kaffe/kaffevm/mem/block.old/gc-block.c: now ../gc-block-hash.c
	* kaffe/kaffevm/mem/block.old/gc-block.h: now ../gc-block-hash.h
	* kaffe/kaffevm/mem/block.new/gc-block.c: now ../gc-block-mmap.c
	* kaffe/kaffevm/mem/block.new/gc-block.h: now ../gc-block-mmap.h
	* kaffe/kaffevm/mem/gc-mem.c: include mem/gc-block.h
	* kaffe/kaffevm/mem/gc-incremental.c: ditto
	* kaffe/kaffevm/Makefile.in (VPATH, INCLUDES): removed block.*,
	added builddir/mem
	* configure.in, configure: print selected gcblock scheme, and
 	create links for gc-block-*.[hc]

Thu Dec  3 12:24:06 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/net/URL.java: fix bug in constructor
	Reported by Alice Dubois <alice.dubois@lemel.fr>
	* libraries/javalib/java/io/BufferedReader.java: fix bug in
	ready() method and do some rewriting/optimization in the process.

Thu Dec  3 12:14:13 1998  Parmelan, Edouard <EP510777@exchange.FRANCE.NCR.com>

	* kaffe/kaffevm/jar.[ch]: memory map class files if possible

Thu Dec  3 07:51:00 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/Makefile.in (build-classes, install-classes): 
	make these work when builddir != srcdir

Thu Dec  3 07:15:53 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/java/awt/MediaTracker.java (COMPLETED): the
	correct spelling is COMPLETE
	* libraries/javalib/Klasses.jar: regen
	Reported by Alice Dubois <alice.dubois@lemel.fr>

Thu Dec  3 04:52:14 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/native/Throwable.c: include stdlib.h before
 	native.h, otherwise jmalloc.h will define malloc, calloc and free
 	before config-std.h includes stdlib.h

Wed Dec  2 17:03:10 1998  Jason Baker  <jbaker@cs.utah.edu>

	* config/i386/common.h: work-around for gcc/PIC register trashing bug.

Wed Dec  2 14:02:08 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/*: libraries/clib/native/*:
	restructured the core to handle error conditions without deadlock.  
	Plus, changed class states to be closer to Java spec.
	Too many files changed to mention here.  Mention only these two:
	* kaffe/kaffevm/classMethod.c:  fixed class states.  See also 
	FAQ/FAQ.class-states.
	* kaffe/kaffevm/jni.c:  took advantage of exception free core to
	streamline some jni operations.

	* kaffe/kaffevm/systems/unix-jthreads/*:  fixed problem with
	lost wakeup on select.  Fixed HP-UX prob where EWOULDBLOCK != EAGAIN.
	Added dumpThreads for debugging, extending suggestion by Edouard.
	* kaffe/kaffevm/locks: added LOCKCONTENTION debug option as suggested
	by Edouard.  Use "-vmdebug deadlock" to look at deadlocks. 
	* libraries/javalib/java/lang/Thread.java, 
	include/java_lang_Thread.h: added stackOverflowError to java.lang.Thread
	kaffe/kaffevm/intrp/machine.c: 
	kaffe/kaffevm/systems/unix-jthreads/*: implemented StackOverflowError
	(interpreter only!)
	kaffe/kaffevm/systems/unix-internal/*: not implemented in old scheme.
	* kaffe/kaffevm/thread.c, exception.c: changed implementation of
	uncaughtException,  use JNI to invoke Thread.run().
	* include/nets.h:  don't declare h_errno if defined as function.
	* libraries/javalib/java/lang/ClassLoader.java: added loadClassVM() 
	method for safer class loading.
	* test/regression/TestScript:  added new tests for new functionality
        and other stuff:
	DoubleBug, ExceptionInInitializerTest, FindSystemClass, Overflow,
	ProcessClassInst, ProcessClassLockTest, ProcessClassTest.

Wed Dec  2 14:02:07 1998  Jason Baker  <jbaker@cs.utah.edu>

	* kaffe/kaffevm/mem/*:  added new, faster block allocation scheme.
	Use --with-gcblock=new to use it.  Read FAQ/FAQ.gcblock for doc.
	* kaffe/kaffevm/support.[ch]: added support for --with-timing
	option.
	* kaffe/kaffevm/slib.h: added support for finding addresses of shlibs.
	* config/config.h.in, config/config-std.h, configure.in,
	kaffe/kaffevm/Makefile.in:  added configure and make support for new 
	gcblock scheme and --with-timing option.

Wed Dec  2 10:05:32 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/System.java: respond to attempts to
	set securitymanager to null by keeping defaultSecurityManager. 
	* libraries/clib/native/Double.c: handle cap 'F' in Double.valueOf().

Fri Nov 27 10:50:34 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/net/MulticastSocket.java: fix for
	constructor.
	libraries/javalib/java/net/SocketImpl.java: fix for getInetAddress

Tue Nov 24 22:42:13 1998  Tim Wilkinson	<tim@transvirtual.com>

	* include/jni.h, include/jni_cpp.h: added C++ binding for JNI.
	kaffe/kaffevm/external.c, kaffe/kaffe/main.c: renamed 
	librarypath -> libraryhome
	kaffe/kaffevm/jni.c: added verboseCalls to jni.c

Tue Nov 24 19:45:47 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/stackTrace.[ch]: postpone call to findMethodFromPC
	to when stacktrace is really printed.

Tue Nov 24 18:11:50 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/DataInputStream.java: catch
	uncaught IOException
	* libraries/javalib/java/lang/Boolean.java: allow uppercase
	letters in Boolean(String s) constructor
	* libraries/javalib/java/io/ObjectInputStream.java: fix infinite
	loop on EOF bug (NADIA VIEIRA LEAO PEREIRA <972155@dcc.unicamp.br>)

Wed Nov 18 18:14:05 1998  Luciane Lamour Ferreira <972311@dcc.unicamp.br>, Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/java/io/StreamTokenizer.java (skipLine): unread
	newline back if it is significant;
	(nextTokenType): remove assignment to ttype when a recursive
	invocation has already taken care of this
	(nextTokenType): handle cases in which `/' is not a comment
	character
	(nextTokenType): do not skip newline as whitespace if it is
	significant
	* libraries/javalib/Klasses.jar: regen

Mon Nov 16 17:36:49 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/awt/ScrollPane.java: make sure we don't 
	pick up the private ScrollPane$Adjustable instead of 
	java.awt.Adjustable.
	* libraries/javalib/java/awt/MenuBar.java: added deprecated 
	countMenus method for HotJava.

Wed Nov 11 13:34:57 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/util/Properties.java: have getProperty
	use super.get.

Tue Nov 10 22:40:39 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* configure.in (nativedir): install run-time (dlopened) libraries
 	in $libdir/kaffe, not within $share/lib
	(ENVIRONMENT) set KAFFELIBRARYPATH too
	(ARCHOS) AC_SUBST it as KAFFE_ARCHOS
	* kaffe/kaffevm/external.c (initNative): do not add
	KAFFEHOME/lib/ARCHOS; rely on JavaVM.librarypath and
	LIBRARYPATH environment variable only
	* kaffe/scripts/kaffe.in (KAFFELIBRARYPATH): set it to
	concatenation of nativedir, any value it may hold, the contents of 
	LD_LIBRARY_PATH and nativedir in its original location within
	KAFFEHOME, for backward compatibility; main.c will try this
	variable before LD_LIBRARY_PATH

Wed Oct 28 22:58:20 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/support.c: fix execute_constructor_v to not look in 
	superclasses for matching constructors.

	* test/regression/TestScript, ConstructorTest.java: new test for that
	from Alexandre.

	* libraries/clib/native/Double.c, Float.c: use appropriate constructor.

	* libraries/javalib/java/lang/ThreadDeath.java
	libraries/javalib/java/util/zip/ZipEntry.java: added no-arg constructor

Tue Oct 27 04:31:35 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts: use bindir instead of prefix/bin

	* kaffe/scripts/kaffe.in: in the comments, refer to datadir
	instead of prefix/share

	* kaffe/scripts/install-jar.in: make it safer with regard to
	command-line input

Tue Oct 27 04:30:04 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/imgjpeg.c: must include <sys/types.h> on
	SunOS 4.1.3

Fri Oct 23 12:52:05 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/config.alias: added ultrix4 alias
	config/mips/ultrix4/: Make.frag, md.[ch], config.frag new files for
	(currently) incomplete MIPS Ultrix4 port.

Fri Oct 23 12:28:47 1998  Dirk Grunwald <grunwald@pa.dec.com>

	* config/alpha/common.h: fixes for alpha port.
	test/regression/TestNative.java: improvements.

Wed Oct 21 18:30:12 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/baseClasses.[ch], kaffe/kaffevm/classMethod.c:
	arrays must implement the cloneable interface.

Wed Oct 21 17:21:12 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/util/BitSet.java: new, improved implementation.
	test/regression/TestScript, BitSetTest.java: tests for above.

Wed Oct 21 08:41:29 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/RandomAccessFile.java,
	libraries/javalib/java/io/DataInputStream.java:
	fix bugs in readLine() method

Mon Oct 19 22:27:56 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/baseClasses.h, kaffe/kaffevm/classMethod.[ch],
	kaffe/kaffevm/support.h, kaffe/kaffevm/mem/gc-incremental.c:
	added support for precise walking of ordinary objects.

	kaffe/kaffevm/debug.[ch]: switched classMethod and gc-incremental
	to new debugging scheme, added options.

Fri, 16 Oct 1998 15:32:18 Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* code-analyse.c, jit/machine.c - Handle unreachable code.

Mon Oct 19 10:43:16 1998  Archie Cobbs <archie@whistle.com>

	* test/regression/{TestScript,ThreadLocalTest}: fix
	ThreadLocalTest output to be deterministic using sort(1)

Tue Oct 13 17:57:34 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: make sure
	SIGVTALRM based polling is always turned on to avoid getting 
	stuck on fds that don't deliver SIGIO when they become writable.

Tue Oct 13 17:28:22 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* Fixes for NCR MP-RAS 3.x (i386/univel_svr4):
	kaffe/kaffevm/jit/basecode.h: constants (``bn'') conflict 
	with sys/vnode.h -> change #defines to enums.

	* config/i386/univel_svr4/:  Page 0 (aka address in range 
	[0, 0x1000[) has read access, so NullPointerException can't retrieve 
	the PC of the current method, remap page 0 as PROT_NONE.

	* configure.in:  Need the library ``mw'' with the library ``m''.
	Need nsl library, but gethostbyname() is not in, add a check with
	gethostname().

Tue Oct 13 16:36:07 1998  Stephen Clawson  <sclawson@cs.utah.edu>

	* libraries/javalib/java/util/Vector.java: fix clone() to invoke
	super.clone()

Mon Oct 12 22:07:24 PDT 1998	Andrew Raymond Trick <a-trick@students.uiuc.edu>

	* java.io.DataInputStream: don't append \n
	* java.io.StreamTokenizer: handled escaped characters.

Mon Oct 12 22:07:24 PDT 1998	Brendon Cahoon <cahoon@meteor.cs.umass.edu>

	* object.c, soft.c: Bug fix for multinewarray - now works when
	  allocating zero length arrays.

Mon Oct 12 22:07:24 PDT 1998	Yasuyui TSUKUI <ytsukui@sf.airnet.ne.jp>

	* Bug fixes for NextStep 3.3.

Fri Oct  9 10:36:19 PDT 1998 Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/external.c: fall back to using LIBRARYPATH if
	nothing specified by Kaffe_JavaVMArgs, for backward compatibility
	(suggested by James Lundblad <jamesl@eecs.berkeley.edu>)
	* libraries/javalib/java/awt/widgets/Scrollbar.java:
	check in bug fix patch from Peter.

Thu Oct  8 12:34:22 PDT 1998 James Lundblad <jamesl@eecs.berkeley.edu>

	* kaffe/kaffevm/jni.c: fix bug in JNI_GetCreatedJavaVMs()

Mon Oct  5 14:16:04 PDT 1998 Transvirtual Technologies <info@transvirtual.com>

        * Version 1.0-b2 of Kaffe OpenVM released.

Thu Oct  1 14:01:43 PDT 1998	Tim Wilkinson	<tim@transvirtual.com>

	* Fixed Sparc/Linux port.
	* Re-added kaffe.applet into class build.
	* Fixed need for ZIP library with PNG library.

Thu, 1 Oct 1998 14:02:05 +0100	Jeppe	<jso@lyngso-industri.dk>

	* QNX patches.

Wed Sep 30 20:24:42 1998  Pavel Roskin <pavel_roskin@geocities.com>

        * config/parisc/common.h: Alignment of 8-byte arguments corrected.
        Buggy smart_args macro removed. All arguments are written to stack and
        then the first four are passed in registers.
        Space on stack is reserved using a variable-size array st_reserve

Tue Sep 29 15:10:07 1998  Patrick Tullmann <tullmann@cs.utah.edu>

	* configure.in: add fmodf to the list of checked functions (needed 
	for change to config/config-math.h
	* config/config-math.h: add javaRemainder and IEEERemainder functions.
	Get rid of remainder, use IEEERemainder and javaRemainder instead.
	* libraries/clib/native/Math.c: have
	java_lang_Math_IEEEremainder() call IEEERemainder().
	* kaffe/kaffe/kaffevm/soft.c, kaffe/kaffe/kaffevm/intrp/icode.h:
	Use javaRemainder() instead of remainder().
	* kaffe/kaffe/kaffevm/jit/icode.c: don't use IEEE remainder
	opcodes in the JIT for remainder operations, always use the soft
	calls.  The Java '%' operator is not the same as the IEEE spec.
	(I think HAVE_rem_double and HAVE_rem_float are useless now.)
	
Fri Sep 25 11:58:18 1998  Maxim Kizub <max@immsp.kiev.ua>

	* libraries/javalib/java/util/Hashtable.java: fix
	ArrayIndexOutOfBoundsException in clear() method

Thu Sep 24 13:38:51 PDT 1998	Tim Wilkinson	<tim@transvirtual.com>

	* Added java.sql package.
	* Added java.math package (not complete).
	* Added Linux/MIPS port.

Thu Sep 24 11:30:20 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/File.java: fix bug in mkdirs()

Sat Sep 18 16:04:46 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	* libraries/javalib/java/lang/Byte.java: add missing shortValue()
	and make Byte extend Number

Mon Sep 14 15:37:04 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/zip/Deflater.c
	(java_util_zip_Deflater_end): nullify this.dtream when it is freed
	(kaffe_zalloc, kaffe_zfree): new functions for zlib to properly
	interface with the garbage collector
	(java_util_zip_Deflater_init): allocate dstream with the right
	size; set up kaffe_zalloc and kaffe_zfree for zalloc and zfree

Fri Sep 11 22:46:26 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/scripts/: replaced all scripts with .in files,
	let configure insert configuration prefix.

Thu Sep 10 14:12:27 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* config/i386/linux/jit-md.h: handle SA_SIGINFO which is provided
	on more recent Linuxes.
	* kaffe/scripts/compat/appletviewer: it's kaffe.awt.Appletviewer,
	not kaffe.applet.Appletviewer.
	* libraries/clib/awt/X/clr.c: use java.awt.Defaults instead of
	java.awt.DefaultsRGB.
	* libraries/javalib/rebuildLib.in: remove kaffe/applet/*
	* libraries/javalib/java/io/ObjectOutputStream.java: fixed typo.
	* libraries/javalib/java/lang/Math.java: fix to pass Java lint.
	* libraries/javalib/java/util/Random.java: ditto.
	* libraries/javalib/java/awt/event/ContainerEvent.java: added break

Wed Sep  9 16:27:16 1998  Godmar Back  <gback@cs.utah.edu>

	* test/regression/TestScript: fixed output for BeanTest
	libraries/javalib/java/net/PlainSocketImpl.java: removed unneeded
	methods.

Wed Sep  9 16:24:07 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in: if KAFFE_DEBUG is defined to either
	gdb or (some variant of) emacs, start a debugging session with
	working directory and argument list properly set

	* kaffe/scripts/appletviewer: if KAFFE_HOME is not set, look
	for other scripts and/or Kaffe in the directory that contains
	the script, following soft links, so that no environment
	variable has to be set
	* kaffe/scripts/jar: ditto
	* kaffe/scripts/javac: ditto
	* kaffe/scripts/javadoc: ditto
	* kaffe/scripts/javakey: ditto
	* kaffe/scripts/javap: ditto
	* kaffe/scripts/jdb: ditto
	* kaffe/scripts/native2ascii: ditto
	* kaffe/scripts/pizza: ditto
	* kaffe/scripts/pizzadoc: ditto
	* kaffe/scripts/rmic: ditto
	* kaffe/scripts/rmiregistry: ditto
	* kaffe/scripts/serialver: ditto
	* kaffe/scripts/compat/appletviewer: ditto
	* kaffe/scripts/compat/java: ditto
	* kaffe/scripts/compat/javac: ditto
	* kaffe/scripts/compat/javadoc: ditto

	* libraries/javalib/java/lang/Integer.java (toUnsignedString):
	create string from unsigned int, using bit operations
	(toBinaryString, toHexString, toOctalString): implement in terms
	of toUnsignedString, as per the Standard
	* libraries/javalib/java/lang/Long.java (toUnsignedString):
	create string from unsigned long, using bit operations
	(toBinaryString, toHexString, toOctalString): implement in terms
	of toUnsignedString, as per the Standard
	* libraries/javalib/java/lang/Object.java (toString): implemented
	according to the JDK 1.[12] specification

Tue Sep  8 15:57:21 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * kaffe/kaffevm/mem/gc-mem.c: getpagesize() may be declared in
        unistd.h
        * libraries/clib/net/InetAddressImpl.c: gethostname() may be
        declared in unistd.h

        * libraries/clib/native/ByteToCharDefault.c
        (Java_kaffe_io_ByteToCharDefault_convert): do not assume
        implicit int
        * libraries/clib/native/CharToByteDefault.c
        (Java_kaffe_io_CharToByteDefault_convert): ditto
        * libraries/clib/awt/X/evt.c (getSourceIdx,
        Java_java_awt_Toolkit_evtRegisterSource): ditto
        * libraries/clib/awt/X/fnt.c
        (Java_java_awt_Toolkit_fntGetWidths): ditto
        * libraries/clib/awt/X/gra.c (jarray2Points): ditto
        * libraries/clib/awt/X/img.c
        (Java_java_awt_Toolkit_imgSetIdxPels): ditto
        (Java_java_awt_Toolkit_imgSetRGBPels): ditto
        * libraries/clib/awt/X/toolkit.h (java2CString): ditto
        (jchar2CString): ditto

        * libraries/clib/awt/X/fnt.c
        (Java_java_awt_Toolkit_fntStringWidth): `n' is only used
        #ifndef WORDS_BIGENDIAN, so declare it in a new scope, to
        avoid warning
        * libraries/clib/awt/X/gra.c
        (Java_java_awt_Toolkit_graDrawString): ditto

        * libraries/clib/awt/X/img.c
        (Java_java_awt_Toolkit_imgSetIdxPels): cast array index from
        char to int, to avoid warning

        * libraries/clib/awt/X/imggif.c (iOffset, iJumps): define only
        #ifdef HAVE_GIF_LIB_H, to avoid warning

        * libraries/clib/awt/X/imgjpeg.c (readJpeg): zero-initialize
        to avoid warning

Tue Sep  8 15:48:29 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* kaffe/kaffevm/string.c: only call unintern for interned strings.
	Don't abort if strhash is full of DELETED strings.

Mon Sep  7 21:52:32 1998  Steve Ratcliffe <sterat@dial.pipex.com>

	* libraries/javalib/java/lang/Byte.java: add missing byteValue()

Mon Sep  7 21:52:32 1998  Petter Reinholdtsen <pere@cc.uit.no>

	* libraries/javalib/java/lang/BufferedInputStream.java,
	  libraries/javalib/java/lang/FilterInputStream.java:
	  use read(byte[], int, int) instead of read(byte[])

Fri Sep  4 15:40:20 PDT 1998	Tim Wilkinson <tim@transvirtual.com>

	* Added new test application.

Wed Sep  2 18:04:36 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/awt/X/img.c: fix bug in countAlphas()
	* libraries/clib/awt/X/{img,gra}.c: eliminate compiler warnings
	* libraries/javalib/java/net/InetAddress.java,
	libraries/javalib/java/net/URL.java: don't compare strings with ==
	* Klasses.jar: regenerate derived file
	* libraries/javalib/java/io/ClassLoader.java: fix double-slash
	bug in fullResourceName()

Wed Sep  2 16:44:09 PDT 1998	Tim Wilkinson <tim@transvirtual.com>

	* Merged in TVT's current Custom class & native changes.

Sat Aug 29 16:30:41 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/baseClasses.c, kaffe/kaffevm/classMethod.[ch]:
	make sure finalize() is not static; take a small step towards
	supporting unloading classes
	* kaffe/kaffevm/jni.c: don't construct with a non-constructor
	* config/i386/jit-i386.def: eliminate compiler warnings
	* test/HelloWorldApp.java: remove unneeded file

Fri Aug 28 21:44:06 1998  Archie Cobbs <archie@whistle.com>

	* configure, configure.in, FAQ/FAQ.install-root: specify
	install root via ./configure --with-installroot=DIR option
	* libraries/javalib/java/lang/Thread.java,
	libraries/javalib/Klasses.jar: add {Inheritable}ThreadLocal classes
	* libraries/javalib/java/lang/ThreadLocal.java,
	libraries/javalib/java/lang/InheritableThreadLocal.java,
	test/regression/ThreadLocalTest.java: new files
	* test/regression/TestScript: add ThreadLocalTest
	* libraries/javalib/kaffe/util/Assert.java: replace with a
	version that doesn't define methods named "true" and "false".
	* include/Makefile.in: make java_lang_Thread.h, java_lang_Throwable.h,
	and java_lang_ThreadGroup.h derived files using kaffeh
	* java_lang_Thread.h, java_lang_Throwable.h: regenerate automatically
	* kaffe/kaffevm/intrp/machine.c: eliminate compiler warnings

Fri Aug 28 13:34:59 1998  Archie Cobbs <archie@whistle.com>

	* Makefile.in, */Makefile.in, */*/Makefile.in, */*/*/Makefile.in,
	libraries/clib/native/external_wrappers.h.debug (new file):
	add "make derived-files" target, used to regenerate files
	that are derived from other files but checked into the repository
	* libraries/javalib/Makefile.in: "make distclean" shouldn't
	remove Klasses.jar
	* test/HelloWorldApp.class: removed (not used)

Fri Aug 28 10:57:38 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/native/ResourceBundle.[ch],
	libraries/clib/native/external_wrappers.h,
	libraries/clib/native/Makefile.in: remove no longer needed files
	* include/java_lang_Object.h, include/java_lang_Thread.h,
	include/nets.h,, kaffe/kaffevm/baseClasses.c,
	kaffe/kaffevm/exception.*, kaffe/kaffevm/mem/gc-mem.c,
	kaffe/kaffevm/systems/unix-*/internal.c,
	kaffe/kaffevm/systems/unix-jthreads/jthread.*,
	libraries/clib/awt/X/*, libraries/clib/math/BigInteger.h,
	libraries/clib/native/Compiler.h, libraries/clib/native/System.h:
	minor fixes to eliminate gcc compiler warnings
	* configure.in: add -Wstrict-prototypes to gcc flags
	* kaffe/kaffeh/support.c: for static methods taking no arguments,
	generate protypes as "method(void)" instead of "method()".
	* libraries/clib/awt/Makefile.in: fix breakage for "make distclean"

Fri Aug 28 09:49:20 1998  Godmar Back  <gback@cs.utah.edu>

	* configure.in, config/config.h.in: 
	libraries/clib/net/PlainSocketImpl.c: added test for netinet/tcp.h
	* config/i386/win32/cygnus/*: moved to config/i386/cygwin32/*
	* libraries/clib/native/ObjectInputStream.c, ObjectOutputStream.c,
	ObjectStreamClass.c: use complete path for system.h to work around
	case-sensitivity for some OSes.

Thu Aug 27 13:53:40 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in: improve CLASSPATH handling in driver 

Thu Aug 27 13:16:01 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffevm/stackTrace.h: fix STACKTRACEEND for intr to
	take JNI methods into account.

Wed Aug 26 14:27:44 1998  Benjamin Reed  <breed@almaden.ibm.com>

	* libraries/javalib/kaffe/lang/UNIXProcess.java: throw 
	IllegalThreadStateException in exitValue if proc is alive.

Tue Aug 25 15:17:38 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/io/FileInputStream.java: declare native
	open to throw IOException.
	* libraries/javalib/java/util/Stack.java: fixes for synchronization
	and search.
	* libraries/clib/native/*: removed warning for -Wall, in particular
	libraries/clib/native/Field.c: fixed use of == instead of =.
	libraries/clib/native/FileInputStream.c: fixed missing return value.
	include/*: -Wall fixes, added prototypes & includes.
	* kaffe/kaffevm/systems/unix-jthreads/*: -Wall fixes.
	* kaffe/kaffevm/*, kaffe/kaffevm/jit/*: -Wall fixes, jit only

Tue Aug 25 14:39:35 1998  Lee Iverson  <leei@Canada.AI.SRI.COM>

        * configure.in (NET_LIBRARIES): Insert -lnsl and -lsocket only if 
	functions are not already provided by libc.

        * include/jmalloc.h: Change references to __malloc and __free to
          jmalloc and jfree.
        * kaffe/kaffevm/gc.c (jmalloc): New name for __malloc.
          (jfree): New name for __free.
        
        * config/mips/common.h (sysdepCallMethod): Call
          mipsN32CallMethod() for MIPS N32 ABI.
        * config/mips/mips.c (mipsN32CallMethod): Define method for
          calling external functions for MIPS N32 ABI.
        * config/mips/threads.h: #define SP_OFFSET and FP_OFFSET for MIPS
          N32 and N64 ABIs.
        
        * config/mips/irix5/md.c: #include "mips/mips.c"
        * config/mips/irix5/md.h: #include "mips/common.h"

Tue Aug 25 01:08:03 1998  Pavel Roskin <pavel.roskin@ecsoft.co.uk>

	* config/parisc/hpux/md.h: include common.h:
	config/parisc/common.h: new file

Tue Aug 25 00:59:00 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-incremental.c: 
	libraries/clib/native/Thread.c:
	libraries/javalib/java/lang/Thread.java:  we cannot rely on
	Thread.finalize to free thread contexts because subclasses
	may not call super.finalize().  Instead, we invoke finalizeThread
	from finalizeObject in gc-incremental.c

Tue Aug 25 00:57:40 1998  Leigh Stoller <stoller@cs.utah.edu>
	
	* kaffe/kaffevm/mem/gc-incremental.c: fixed nasty bug where
 	objects that were not yet finalized referred to reclaimed
	memory.

Mon Aug 24 19:01:23 1998  Tim Wilkinson <tim@transvirtual.com>

	* kaffe/kaffevm/intrp/icode.h: fixed cvt_int_char. 
	test/regression/CharCvt.java:  added testcase for that.

Thu Aug 20 00:22:02 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* config/alpha/trampolines.c: remove extra trailing #endif

Wed Aug 19 21:54:45 1998  Archie Cobbs  <archie@whistle.com>

	* kaffe/kaffevm/string.c: make sure hashChars works even if len==0
	* libraries/javalib/java/lang/Throwable.java: use toString in
	printStackTrace.
	* configure.in, */Makefile.in: added INSTROOT variable
	FAQ/FAQ.install-root: new file

Wed Aug 19 21:41:53 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * libraries/clib/native/Method.c
	(Java_java_lang_reflect_Method_invoke): assign integer returned by 
	static method to ret.i

Wed Aug 19 18:55:23 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/common.h: Merged version between linux and netbsd/sunos.
	config/m68k/netbsd1/jit-md.h: Change a field name to reflect 
	structural change in 1.0b.
	config/m68k/netbsd1/jit.h: Add trampoline support, and reorder 
	definitions.
	config/m68k/netbsd1/md.h: Move sysdepCallMethod definition from 
	here to 'common.h'.
	config/m68k/sunos4/config.frag: Remove cross development command names.
	config/m68k/sunos4/md.h: Move sysdepCallMethod definition from here 
	to 'common.h'.
	config/m68k/trampolines.c: New file to support trampoline, only 
	for staticlib.

Wed Aug 19 18:03:54 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * libraries/clib/native/FileInputStream.c
	(java_io_FileInputStream_available): try file size, from fstat,
	minus current position, from lseek, before trying ioctl and/or select

Wed Aug 19 15:23:07 1998  Pavel Roskin  <Pavel.Roskin@ecsoft.co.uk>

	* config/config-hacks.h, config-io.h: only include winsock if we
	don't have <sys/socket.h>.
	* libraries/clib/native/System.c, File.c: use ../ in include to
	work around case insensitivity on some OSs.
	* config/config.alias: treat all HPPA versions the same.
	* kaffe/kaffe/main.c: avoid empty if() clause for #ifdef'd code.
	* kaffe/kaffevm/slib.h, config/parisc/hpux/config.frag: HPUX-specific
	fixes.

Wed Aug 19 11:45:12 1998  Mike Boilen <mgb@cs.brown.edu>

	* libraries/javalib/java/lang/Runtime.java: fixed typo in parsing cmd.
	libraries/clib/native/UNIXProcess.c: fixed typo in passing of env.

Tue Aug 18 15:24:32 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/ObjectInputStream.java: avoid unwanted
	sign extension in readLong().

Tue Aug 18 15:19:44 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* configure.in (ac_cv_underscore_c_names): no need to run the
	test; linking is enough, and allows it to run even when cross
	compiling

Tue Aug 18 14:03:54 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/clib/Makefile.in: make sure we don't recurse unless we
	have a Makefile.  This works now whether or not object and source
	tree are separate.
	* kaffe/kaffevm/jni.c: added missing return values.

Thu Aug 13 18:17:51 1998  Archie Cobbs <archie@whistle.com>

	* config/config.h.in, libraries/clib/native/FileDescriptor.c:
	  uppercase options HAVE_sync and HAVE_fsync

Thu Aug 13 10:55:45 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Integer.java: fix decoding
	  bugs in decode() and getInteger() methods.

Mon Aug 10 19:58:36 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/jni.c (Kaffe_JNI_wrapper): call installMethodCode
	* kaffe/kaffevm/jit/machine.c: export installMethodCode 

Sun Aug  9 12:06:18 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/net/DatagramSocket.java: modified to
	use DatagramSocketImpl.
	* test/regression/UDPTest.java: new file

Sun Aug  9 11:02:33 1998  Juergen Sonnauer <sonic@az-online.net>

	* kaffe/kaffevm/jni.c: use STRING_DATA in GetStringChars.

Fri Aug  7 16:14:05 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffeh/support.c: fixed bug where `void' return type was
	omitted in JNI declarations.

	* libraries/javalib/java/net/Socket.java: made default constructor
	protected, added Socket(SockImpl) constructor

	* libraries/javalib/java/net/ServerSocket.java: implemented 
	constructor ServerSocket(int, int, InetAddress).

Fri Aug  7 11:47:04 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/BufferedOutputStream.java: don't call 
	flush when buffer is full, just write the buffer.  Use System.arraycopy
	in write(byte[], int, int).  Remove finalizer because 
	BufferedOutputStreams don't get automatically closed or flushed.

	* libraries/javalib/java/io/ByteArrayOutputStream.java:
	ensureCapacity is not public.  Add some extra bytes when growing 
	buffer.  Use System.arraycopy in write(byte[], int, int).

	* libraries/javalib/java/io/CharArrayWriter.java: toCharArray()
	must return only used part of buffer, and it must copy it.

	* libraries/javalib/java/io/DataOutputStream.java: express all 
	writeXXX() with a call to write(int) or write(byte[], int, int) 
	which could be overloaded.  Use a ByteArrayOutputStream in writeUTF().
        In writeInt(), use an array of bytes for correct masking.

	* libraries/javalib/java/io/RandomAccessFile.java: express all 
	writeXXX() with a call to write(int) or write(byte[], int, int) 
	Have writeUTF() use a ByteArrayOutputStream. Fixed writeInt as in
	DataOutputStream.  Fixes to readUTF().   

Thu Aug  6 15:52:40 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* configure.in, config/config.h.in: added test for execvp
	include/jsyscall.h: 
	kaffe/kaffevm/systems/unix-internal/internalCalls.c:
	kaffe/kaffevm/systems/unix-jthreads/internal.c:
	kaffe/kaffevm/systems/unix-jthreads/jthread.c:
	kaffe/kaffevm/systems/unix-jthreads/jthread.h:
  	added forkexec and kill, removed fixfd from syscall interface.
  	implemented fork/exec in jthreads package.
	
	libraries/clib/native/UNIXProcess.[ch]:
	libraries/javalib/kaffe/lang/UNIXProcess.java:
	libraries/clib/native/external_wrappers.h: various fixes;
  	removed notifyReaders.  UNIXProcess.c uses JNI & and the forkexec
	syscall now and is now longer Sun-compatible as far as the native 
	methods go.

	test/regression/TestScript: updated Bean for new string hash.
	test/regression/ProcessTest.java: new file.

Wed Aug  5 21:38:12 1998 Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c
	(jthreadedFileDescriptor): ENOTTY is an acceptable error for an
	ioctl FIOASYNC call
	
Wed Aug  5 15:39:40 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/String.java:
	kaffe/kaffevm/string.c: updated hash function to comply with 1.2,
	patch provided by <archie@whistle.com>

Wed Aug  5 13:21:06 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/{Number|Double|Float|Long|Short|
	Integer|Byte}.java:  byteValue() and shortValue() are not 
	abstract, they can be implemented in terms of intValue();

Tue Aug  4 12:00:54 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Object.java: make sure wait(0,1)
	doesn't block.

Tue Aug  4 11:57:54 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/Writer.java|PrintWriter.java:
	synchronized println and write method to ensure that lines are
	written as a whole.

Tue Aug  4 10:48:23 1998  Wolfgang Muees <wolfgang@wmsickte.escape.de>

	* libraries/javalib/java/util/ResourceBundle.java: don't call
	newInstance in getSpecificBundle if object cannot be cast to Bundle.

Sun Aug  2 10:33:16 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	*libraries/javalib/java/net/Socket.java
	libraries/javalib/java/net/DatagramSocket.java: Corrected
	interface of setSoTimeout from (boolean, int) to (int).  Added
	DatagramSocket.getLocalAddress()

Sat Aug  1 12:16:30 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	* libraries/javalib/java/net/Socket.java: added getLocalAddress()
	and fixed setLinger().

Fri Jul 31 19:22:58 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/File.java: made isAbsolute() public

Thu Jul 30 22:00:49 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/clib/net/Plain*SocketImpl.[ch]|SocketOptions.h:
	libraries/javalib/java/net/PlainDatagramSocketImpl.java,
	PlainSocketImpl.java, Socket.java, SocketImpl.java,
	SocketOptions.java:  implemented various socket options.

Thu Jul 30 22:00:49 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/Integer.java|Number.java: 
	added support for serialization.

	* libraries/javalib/java/net/DatagramSocket.java: for now, use 
	PlainDatagramSocketImpl.java to implement a socket.

Thu Jul 30 14:47:55 1998  Archie Cobbs  <archie@whistle.com>

	* kaffe/kaffevm/locks.c: fix for throwing IllegalMonitorStateException 
	if lock is not held.

Wed Jul 29 14:41:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/File.java: fixed getParent to not 
	modify the stored path

Wed Jul 29 10:43:01 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/BufferedWriter: fixed flush chain
	libraries/javalib/java/io/CharArrayWriter.java: fixed toString()
	kaffe/scripts/*: protect arguments with "@$"
	libraries/javalib/java/text/ParseException.java: made constructor
	public.

Tue Jul 28 15:27:56 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* configure.in, configure, config/config.h.in: added check for
	snprintf.

	* kaffe/kaffevm/errors.h, soft.c: made classcast exceptions more 
	informative.

	* libraries/javalib/java/lang/Class.java:
	libraries/javalib/java/util/ResourceBundle.java: fixed problems
	that were caused by getClassLoader() fix.

	* config/i386/jit-i386.def, kaffe/kaffevm/debug.[ch]: PJB's 
	<pjb@imaginet.fr> work-around to allow debugging under Linux.

Mon Jul 27 18:14:44 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/String.java: fixed String.
	equalsIgnoreCase() to work correctly when null is passed as argument.

Mon Jul 27 09:32:05 1998  Giles Lean  <giles@nemeton.com.au>

	* libraries/javalib/java/io/File.java: fix for getParent to return
	"/" for "/tmp".

Sun Jul 26 14:33:54 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/FileInputStream.java:  map IOException 
	to FileNotFoundException to comply with spec.

	* libraries/javalib/java/lang/ThreadGroup.java: fixed printThreads 
	and printGroups to deal with null entries which may exist  
	after threads or groups are removed.

Sat Jul 25 12:57:56 1998  Even Holen  <evenh@pvv.ntnu.no>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: patches to get
	jthreadedFileDescriptor working under HP-UX 10.x

Thu Jul 23 23:12:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/util/Hashtable.java: added serialization.

Thu Jul 23 18:47:57 1998  Brian Burton <brian@burton-computer.com>

	* libraries/javalib/java/io/RandomAccessFile.java: use call 
	writeBytes instead of write to avoid writing byte by byte.

Thu Jul 23 15:31:28 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffevm/threads.c: fixed race condition at thread startup 
	time where privateInfo wasn't available to a newly started thread.

Thu Jul 23 11:43:35 1998  Brian Burton <brian@burton-computer.com>

	* libraries/javalib/java/io/StreamTokenizer.java: fix nextToken
	to return string delimiter in ttype.

Wed Jul 22 22:52:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/reflect/Field.java: fixed Field.getType()
	* libraries/javalib/java/util/Hashtable.java: fixed clone method
	  to properly clone subclasses.

Wed Jul 22 17:08:44 1998  Stephen Clawson  <sclawson@cs.utah.edu>

	* libraries/javalib/java/net/InetAddress.java: use equals instead 
	  of == to check for string equality.

Wed Jul 22 16:39:56 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/clib/Makefile.in: make sure that we only recurse 
	into existing subdirectories.

Tue Jul 21 19:37:59 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/Class.java: fixed bug where 
	getClassLoader() returned a non-null object for classes that
	were not loaded by a class loader.

Mon Jul 20 22:16:16 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Integer.java: fix for parseInt.
	* libraries/javalib/java/util/Vector.java: check for array index
	  out of bounds in elementAt

Mon Jul 20 19:06:48 1998  Raffaele Sena <raff@aromatic.com>

	* config/arm/linux, config/config-hacks.h, config/arm/common.h:
	    fixes for NetWinder/Linux port.

Mon Jul 20 18:41:19 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/clib/native/Makefile.in: add KAFFEVMFLAGS to ALL_CFLAGS 
	  to make sure things like NO_SHARED_LIBRARIES are known when compiling
	  the native subdirectory.

	* kaffe/kaffevm/findInJar.c: fix to allow for read-only strings
	  as classpath.

Sun Jul 19 23:46:30 1998  Rick Greer <rick@sandpiper.com>

	* config/alpha/common.h: system-dependent stuff for alpha/linux

Sun Jul 19 23:28:02 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/netbsd1/config.frag|md.h: system/configuration stuff

	* include/java_lang_ThreadGroup.h:  removed vmAllowSuspension field.
	  kaffe/kaffevm/thread.c: removed vmAllowSuspension field.

Sun Jul 19 19:54:21 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Class.java: added missing slash
	  in fullResourceName.

	* kaffe/kaffevm/jni.c: fixed problem where JNI would signal
	  out of bound if last array element was included.

	* kaffe/kaffevm/jar.c: fixed problem with incorrectly locating
	  file data inside JAR/ZIP files.  See cvs log entry for more expl.

Sun Jul 19 19:31:07 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.h: fixed race 
	  condition where virtual timer was armed too early.

Sun Jul 19 19:31:07 1998  Raffaele Sena  <raff@aromatic.com>

	* kaffe/kaffevm/intrp/icode.h: fixed I2C

Tue Jul 14 22:21:42 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/toolkit.h: #include stdlib.h before
	anything else, because some X implementations #define calloc

        * libraries/clib/awt/X/img.c: include stdlib.h (for size_t)
        before jpeglib.h

        * libraries/clib/native/Makefile.in: use CPPFLAGS and LDFLAGS
        from configure environment
        * libraries/clib/zip/Makefile.in: ditto
        * libraries/clib/math/Makefile.in: ditto
        * kaffe/kaffe/Makefile.in: ditto
        * kaffe/kaffevm/Makefile.in: ditto
        * libraries/clib/management/Makefile.in: ditto
        * libraries/clib/awt/Makefile.in: ditto

Tue Jul 14 15:05:28 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/sunos4/md.h, config.frag:  machine-specific macros
	  sysdepCallMethod, ALIGNMENT_OF_SIZE.

Tue Jul 14 00:00:00 1998  Transvirtual Technologies     <info@transvirtual.com>

        * Version 1.0-b1 of Kaffe OpenVM released.
          The first complete Kaffe release, including all Java libraries.

See ChangeLog.1 for earlier changes.

Local Variables:
add-log-time-format: current-time-string
End:
Fri Dec 18 17:05:52 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* 

Fri Dec 18 09:01:07 1998  Jim Flowers <flowers@aligninc.com>

	* libraries/clib/management/Makefile.in, 
	libraries/clib/net/Makefile.in: fixes for Win32/Cygwin.

Fri Dec 18 08:56:10 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-incremental.c: rename MARK_OBJECT to
	MARK_OBJECT_PRECISE to make clear that it marks objects precisely
	without invoking gc_heap_isobject.
	* kaffe/scripts/Makefile.in: create bindir in install-pizza target.

Fri Dec 18 08:45:05 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* kaffe/kaffevm/readClassConfig.h: avoid allocating zero-length
	Method arrays.
	* kaffe/kaffevm/mem/gc-incremental.c: detect attempts to allocate
	zero-sized objects.  Fix for marking trampolines in walkMethod.

Fri Dec 18 08:43:05 1998  Leigh Stoller  <stoller@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-mem.c: fixed race condition where gc_heap_total
	was incremented prematurely.  (This was only relevant for gcblock=mmap.)

Fri Dec 18 01:29:10 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/mem/gc-incremental.c (walkPrimArray): defined to 
	walkNull
	(gcFunctions): unify it into a single list; use finalizeClass for
	interfaces too; use walkPrimArray (i.e., walkNull) for arrays of
	primitive types
	(MARK_OBJECT): new macro to ease calling markObjectDontCheck
	(walkObject, walkRefArray): don't bother to mark the class; the
	ClassLoader does already; call MARK_OBJECT where appropriate,
	except where it introduces crashes: race conditions?

Thu Dec 17 13:53:38 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* config/*/*/md.h:  declared init_md to avoid -Wall warnings.
	libraries/clib/awt/X/*.c:  more -Wall fixes.
	* libraries/javalib/java/util/Vector.java: implemented toArray.

Thu Dec 17 13:22:59 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/ClassLoader.java: keep all loaded
	classes in hashtable to prevent losing them prematurely.
	* libraries/clib/native/ClassLoader.c: removed INTERNUTF8 defines and
	fixed memory leak in findSystemClass.
	* kaffe/kaffevm/code-analyse.c: replaced gc_free with KFREE for
	consistency.
	* kaffe/kaffevm/classMethod.c: don't free arr_name in lookupArray.
	* kaffe/kaffevm/mem/gc-mem.c, kaffe/kaffevm/mem/gc-incremental.h: 
	removed call/declaration of objectStatsPrint and made it static.
	* kaffe/kaffevm/mem/gc-incremental.c: introduced RECORD_MARKED
	macro for keeping statistics on how many objects we mark.
	Complain if VM attempts to explicitly free non-fixed objects.

Wed Dec 16 10:52:18 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/util/Random.java: implemented according 
	to JLS, passes mauve now.
	* libraries/javalib/kaffe/io/CharToByteConverter.java: ignore
	file.encoding.pkg as for ByteToCharConverter
	* libraries/javalib/kaffe/io/CharToByteConverter.java, 
	ByteToCharConverter.java: consult ConverterAlias for alternate names
	* libraries/javalib/kaffe/io/ConverterAlias.java: find alternate
	names for certain encodings.
	* kaffe/kaffevm/*: libraries/clib/native/ClassLoader.c,
	libraries/javalib/java/lang/ClassLoader.java: 
	implemented class garbage collection.
	* test/regression/ClassGC.java, ClassGCTest.java: basic test for
	class gc.

Tue Dec 15 23:16:40 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/lookup.[ch], kaffe/kaffevm/exception.[ch]:
	moved findExceptionBlockInMethod and findExceptionInMethod from
	lookup.c to exception.c and made it static.
	Patched bug where unresolved catch classes caused recursive
	exceptions.
	* test/regression/ExceptionTestClassLoader.java, ExceptionTest.java,
	ExceptionTestClassLoader2.java:  tests adopted from Ben Reed 
	<breed@almaden.ibm.com> for this and the bug were pending exceptions
	weren't stored when loadClass was called.
	* config/arm/netbsd1/config.frag: removed hardcoding of threading
	system since jthreads seems to work now.

Tue Dec 15 22:13:46 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in (KAFFE_DEBUG): find `GDB' or `GNU gdb'
 	anywhere in the `--version' output, not only in the beginning

Tue Dec 15 16:11:24 1998  Archie Cobbs <archie@whistle.com>

	* configure, configure.in: use -lgcc on FreeBSD and NetBSD
	platforms as a better workaround for the modulo bug.
	* kaffe/kaffevm/soft.c: remove previous (slower) workaround.

Tue Dec 15 14:11:32 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.h: made state signed char cause we
	use -1 as a value.
	* test/regression/HashtableTest1.java: a test for a recent hashtable fix

Tue Dec 15 01:22:27 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.c: save and restore pending exceptions
	when invoking classloader.
	libraries/clib/native/Method.c:  process class if needed.
	Thanks to Benjamin Reed for helping to uncover these two bugs.

Mon Dec 14 15:48:32 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: fixed race between
	exiting threads and asynchronous cancellation requests.
	* test/regression/InitTest.java: new test.

Mon Dec 14 13:20:30 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/awt/widgets/List.java: fix for updateFlyOver.

Mon Dec 14 10:55:26 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/BufferedInputStream.java: rewrite
	class to eliminate some bugs and optimize performance
	* test/regression/MarkResetTest.java: added new test

Sun Dec 13 14:47:44 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Integer.java: throw NumberFormatException
	when parseInt is called with null, as spec demands.
	* libraries/javalib/java/net/URLConnection.java: don't ignore 
	NullPointerException resulting from calls to Integer.parseInt.
	* libraries/javalib/kaffe/io/ByteToCharConverter.java: ignore 
	"file.encoding.pkg" property for now.  See comment there.
	* kaffe/kaffevm/lookup.c: avoid throwing exceptions if catch classes
	could not be resolved.
	* libraries/javalib/java/io/BufferedInputStream.java: throw more
	informative error message when reset() fails.
	* kaffe/kaffevm/code-analyse.c: tell getMethodSignatureClass to load
	eagerly.
	* kaffe/kaffevm/stackTrace.[ch], libraries/clib/native/Class.c,
	libraries/clib/native/ObjectInputStream.c, 
	libraries/clib/native/SecurityManager.c: compute method from pc
	when examining backtrace.  This fixes a bug introduced by me
	on Tue Nov 24.

Sat Dec 12 19:04:18 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.c: fixed loadClass to not overwrite
	clazz->centry with initiating classloader.  Was pointed out by
	Ben Reed <breed@almaden.ibm.com>.  Implemented name check.
	* test/regression/CLTestLie.java: new test for name check.
	* libraries/javalib/java/util/Properties.java: 
	handle header == null in Properties.save.
	* kaffe/kaffevm/stackTrace.c: make sure we find line numbers
	even if start_pc == 0 (which can happen in the interpreter)
	* libraries/javalib/java/io/StreamTokenizer.java: fixed bug where
	whitespaces including \n were skipped even though EOL was significant.
	Avoid pushing back EOF because it comes back as 65535.
	* libraries/javalib/java/lang/SecurityManager.java: added deprecated
	inCheck variable.
	* libraries/javalib/java/lang/reflect/Modifier.java: changed 
	toString to print modifiers in proper order.
	* config/config-math.h, config/config.h.in, 
	libraries/clib/native/Math.c: check for and use rint() for Math.rint()

Sat Dec 12 10:46:44 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/external.[ch], kaffe/kaffevm/support.c: changed
	signature of native to take errorInfo.
	kaffe/kaffevm/jit/machine.c: moved call to verifier out of 
	translatorlock.
	* test/regression/CLTestJLock.java, TestScript:  test for that
	translator lock fix.
	* libraries/clib/awt/X/clr.c: include "config-std.h" to fix broken
	compile.

Sat Dec 12 05:59:21 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* include/Makefile.in (INCLUDEFILES): remove trailing backslash
	from last line, this break some dumb makes

Sat Dec 12 05:48:17 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* test/regression/TestScript (echo_n_sp): portable echo -n
	* test/regression/TestScriptThread (echo_n_sp): ditto

Fri Dec 11 22:55:41 1998  Archie Cobbs <archie@whistle.com>

      * config/alpha/jit-alpha.def include/jmalloc.h include/jsyscall.h
      include/native.h kaffe/kaffeh/constants.c
      kaffe/kaffeh/kaffeh-support.h kaffe/kaffeh/support.c
      kaffe/kaffevm/classMethod.c kaffe/kaffevm/code-analyse.c
      kaffe/kaffevm/code-analyse.h kaffe/kaffevm/external.c
      kaffe/kaffevm/findInJar.c kaffe/kaffevm/gc.c kaffe/kaffevm/gc.h
      kaffe/kaffevm/inflate.c kaffe/kaffevm/jar.c kaffe/kaffevm/jni.c
      kaffe/kaffevm/soft.c kaffe/kaffevm/string.c kaffe/kaffevm/support.c
      kaffe/kaffevm/support.h kaffe/kaffevm/jit/constpool.c
      kaffe/kaffevm/jit/icode.c kaffe/kaffevm/jit/labels.c
      kaffe/kaffevm/jit/machine.c kaffe/kaffevm/jit/seq.c
      kaffe/kaffevm/jit/slots.c
      kaffe/kaffevm/systems/unix-internal/internal.c
      kaffe/kaffevm/systems/unix-internal/internalCalls.c
      kaffe/kaffevm/systems/unix-jthreads/internal.c
      kaffe/kaffevm/systems/unix-jthreads/jthread.h
      libraries/clib/awt/X/clr.c libraries/clib/awt/X/evt.c
      libraries/clib/awt/X/gra.c libraries/clib/awt/X/img.c
      libraries/clib/awt/X/imggif.c libraries/clib/awt/X/imgpng.c
      libraries/clib/awt/X/tlk.c libraries/clib/awt/X/toolkit.h
      libraries/clib/io/AudioPlayer.c libraries/clib/io/File.c
      libraries/clib/io/FileInputStream.c
      libraries/clib/io/FileOutputStream.c
      libraries/clib/io/RandomAccessFile.c libraries/clib/native/Array.c
      libraries/clib/native/Class.c libraries/clib/native/ClassLoader.c
      libraries/clib/native/ObjectInputStream.c
      libraries/clib/native/ObjectStreamClass.c
      libraries/clib/native/UNIXProcess.c libraries/clib/native/ZipFile.c
      libraries/clib/net/PlainDatagramSocketImpl.c
      libraries/clib/net/PlainSocketImpl.c libraries/clib/zip/Deflater.c
      libraries/clib/zip/Inflater.c: replace jmalloc.h and jsyscall.h
      macros with more intuitive names; a few other misc cleanups.

Fri Dec 11 22:54:09 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/object.c, kaffe/kaffevm/mem/gc-incremental.c:
	reintroduced non-finalizer allocation types.
	* libraries/clib/native/Thread.c, 
	libraries/javalib/java/lang/Thread.java: implemented clever new
	way of finalizing threads suggested by Alexandre. 

Fri Dec 11 18:38:52 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-block-hash.c, include/jmalloc.h,
	kaffe/kaffe/main.c, libraries/clib/awt/X/*.c,
	libraries/clib/io/AudioPlayer.c, libraries/clib/io/File.c,
	libraries/clib/math/BigInteger.c, libraries/clib/native/*.c,
	libraries/clib/zip/Deflater.c, libraries/clib/zip/Inflater.c:
	removed dangerous #redefine of malloc, calloc, and free and replaced
	it with calls to jmalloc, jcalloc, and jfree where appropriate.

Fri Dec 11 18:36:52 1998  Jason Baker  <jbaker@cs.utah.edu>

	* config/i386/common.h, config/sparc/common.h,
	kaffe/kaffevm/support.[ch]:  simplified sysdepCallMacro.
	Improved timing system.

Fri Dec 11 09:40:17 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/classMethod.[ch], kaffe/kaffevm/mem/gc-incremental.c:
	don't waste time invoking empty finalizers.

Fri Dec 11 14:14:45 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/clr.c: memmove is missing on SunOS4, get
	alternate definition from config-mem.h

Fri Dec 11 07:26:29 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/awt/Window.java: changed == to != in 
	removeNotify

Fri Dec 11 07:16:14 1998  Mark Huizer <xaa@xaa.iae.nl>

	* libraries/javalib/java/awt/ScrollPane.java: made SCROLLBARS_ 
	constants public.

Thu Dec 10 23:43:33 1998  Mark Lentczner <markl@glyphic.com>
 
	* libraries/javalib/java/io/DataInputStream.java: fixed typo in read

Thu Dec 10 23:33:39 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/internal.c: fixed race condition
	pointed out by Leigh Stoller <stoller@cs.utah.edu>
	* libraries/javalib/java/lang/ThreadGroup.java: made essential
	methods synchronized.

Thu Dec 10 22:07:44 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/jni.c (maxLocal): declare it
	(Kaffe_JNI_wrapper): define maxLocal to ensure that args passed in 
	registers are spilled when needed

Thu Dec 10 11:40:11 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/intrp/machine.c: fix handling of synchronized
	methods so that locks are unlocked when exception is thrown.
	* kaffe/kaffevm/locks.c, kaffe/kaffevm/systems/unix-jthreads/jthread.c:
	improved debugging.
	* kaffe/kaffevm/jni.c: use exitThread instead of stopThread
	* kaffe/kaffevm/thread.c: fixes for stopThread.  Use JNI to invoke
	uncaughtException.
	* libraries/clib/native/Thread.c: added null pointer check to stop.
	* libraries/javalib/java/lang/ThreadGroup.java: fixed uncaughtException
	* libraries/javalib/java/lang/ClassLoader.java, 
	kaffe/kaffevm/classMethod.c: removed ClassLoader.loadClassVM,
	fixed loadClass to use JNI, handle errors and handle thread dying 
	in loadClass.
	* kaffe/kaffevm/soft.c: fixed long remainder prob for FreeBSD.
	* kaffe/kaffevm/code-analyse.c, kaffe/kaffevm/jit/labels.[ch],
	kaffe/kaffevm/jit/machine.[ch]: made verifier reentrant.
	guarded translator against reentering by moving all loading to
	the (now) reentrant verifier.
	* kaffe/test/regression/TestScript: adapted to handle deprecated and
	sorted tests.  New tests for all the bug fixes:
	CLTestConc.java, CLTestConc_run.java, LostFrame.java, TestUnlock.java,
	UncaughtException.java

Thu Dec 10 16:32:00 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/math/BigInteger.c: undef calloc too

Wed Dec  9 22:01:05 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/errors.h kaffe/kaffevm/exception.c
	kaffe/kaffevm/exception.h kaffe/kaffevm/findInJar.c
	include/jni.h kaffe/kaffevm/soft.c kaffe/kaffevm/support.c
	kaffe/kaffevm/support.h libraries/clib/native/Class.c
	libraries/clib/native/Method.c libraries/clib/awt/X/img.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/img.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/evt.c
	libraries/clib/awt/X/imggif.c libraries/clib/awt/X/imgjpeg.c
	libraries/clib/awt/X/clr.c libraries/clib/awt/X/gra.c
	libraries/clib/awt/X/img.c libraries/clib/awt/X/imgpng.c
	libraries/clib/awt/X/toolkit.h: eliminate compiler warnings
	* libraries/javalib/Klasses.jar: synchronize

Wed Dec  9 18:41:09 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Cloneable.java
	kaffe/kaffeh/Makefile.in, kaffe/kaffevm/baseClasses.c,
	kaffe/kaffevm/debug.h, kaffe/Makefile.in: added consistency check
	between Klasses.jar found at run-time and the one at compile-time.

Wed Dec  9 18:44:36 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/io/AudioPlayer.c: oops, config-std.h needs
	config.h on some platforms

Wed Dec  9 11:08:35 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/io/AudioPlayer.c: include config-std.h before
 	jni.h, so as to prevent malloc from being defined when stdlib is
 	included

Tue Dec  8 23:53:51 1998  Archie Cobbs <archie@whistle.com>

	* test/regression/ModuloTest.java: add test for the 64 bit
	negative modulo bug noticed in FreeBSD
	* Slurp in @datadir@/share/kafferc and ${HOME}/.kafferc
	* Update neglected kaffe(1) man page.

Tue Dec  8 13:48:02 1998  Raffaele Sena <raff@aromatic.com>

	* config/arm/linux/config.frag: allowed for use of shared libraries. 

Tue Dec  8 13:46:05 1998  Leigh Stoller <stoller@cs.utah.edu>

	* kaffe/kaffevm/jar.c: fall back to read if mmap fails.
	kaffe/kaffevm/mem/gc-block-mmap.h: allow for machine-specific 
	definitions of gc_heap_base.

Tue Dec  8 11:58:47 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/file.h, kaffe/kaffevm/findInJar.c
	libraries/clib/native/ClassLoader.c: fixed missing declaration of
	findInJar, removed unused init function from ClassLoader.c
	Avoid creating empty class entries in findLoadedClass0.
	* kaffe/kaffevm/classMethod.c: added lookupClassEntryInternal.

Tue Dec  8 09:55:42 PST 1998 Transvirtual Technologies <info@transvirtual.com>

        * Version 1.0.b3 of Kaffe OpenVM released.

Tue Dec  8 09:20:16 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/code-analyse.c: don't print warnings for unreached
	basic blocks, as suggested by Edouard.

Tue Dec  8 09:10:20 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/Long.java, Integer.java: fixes to
	toXXXString methods.

Mon Dec  7 23:18:07 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/inflate.c: free inflateInfo after use, reported
	by Jongwon Kim <freefish@chollian.net>

Mon Dec  7 18:08:19 PST 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/{net,io}/Makefile.in: fix some breakage
	with make depend, make derived-files, and INSTROOT
	* includes/java_lang_Thread.h: sync exceptObj with class file
	* kaffe/kaffevm/exception.c, kaffe/kaffevm/jni.c: adjust
	for new type of (struct Hjava_lang_Thread*)->execptObj.

Mon Dec  7 16:47:23 PST 1998	Tim Wilkinson <tim@transvirtual.com>

	* Merged in Transvirtual's current snapshot.  The changes are
	  large and various.  AWT now supports Swing and 1.0 events.

Mon Dec  7 17:13:01 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/Boolean.java: have hashCode return
	the value mauve thinks is right.
	* libraries/javalib/java/lang/String.java: fixes for indexOf and
	lastIndexOf so that mauve's string tests pass.

Mon Dec  7 13:11:20 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/locks.c: fixed race condition in newLock where
	uninitialized locks were used.  
	Found by Leigh Stoller <stoller@cs.utah.edu>

Sun Dec  6 22:52:10 1998  Godmar Back  <gback@cs.utah.edu>

	* include/java_lang_Thread.h, libraries/javalib/java/lang/Thread.java,
	kaffe/kaffevm/{jit|intr}/machine.c kaffe/kaffevm/exception.[ch]:
	test/regression/Overflow.java:
	implement stack overflow error properly.  JIT part was submitted 
	by Edouard.
	* kaffe/kaffevm/thread.[ch], libraries/clib/native/Thread.c,
	kaffe/kaffevm/systems/unix-jthreads/internal.c, jthread.c
	libraries/javalib/java/lang/Object.java: implemented Thread.interrupt().
	test/regression/ThreadInterrupt.java: new test for Thread.interrupt()
	kaffe/kaffevm/systems/unix-internal/internal.c: added stub.

Fri Dec  4 13:51:58 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/beans/Introspector.java:
	libraries/javalib/java/beans/IndexedPropertyDescriptor.java:
	small fixes for mauve.

Thu Dec  3 22:58:25 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/lang/StringBuffer.java: redid setLength
	as pointed out by Johannes Deisenhofer <joe@dillingen.baynet.de>
	* libraries/javalib/java/lang/Character.java: added partial isDefined
	and fixed typo in isIdentifierIgnorable.

Thu Dec  3 21:00:25 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* FAQ/FAQ.gcblock: renamed `old' to `hash' and `new' to `mmap'
	* kaffe/kaffevm/mem/block.old/gc-block.c: now ../gc-block-hash.c
	* kaffe/kaffevm/mem/block.old/gc-block.h: now ../gc-block-hash.h
	* kaffe/kaffevm/mem/block.new/gc-block.c: now ../gc-block-mmap.c
	* kaffe/kaffevm/mem/block.new/gc-block.h: now ../gc-block-mmap.h
	* kaffe/kaffevm/mem/gc-mem.c: include mem/gc-block.h
	* kaffe/kaffevm/mem/gc-incremental.c: ditto
	* kaffe/kaffevm/Makefile.in (VPATH, INCLUDES): removed block.*,
	added builddir/mem
	* configure.in, configure: print selected gcblock scheme, and
 	create links for gc-block-*.[hc]

Thu Dec  3 12:24:06 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/net/URL.java: fix bug in constructor
	Reported by Alice Dubois <alice.dubois@lemel.fr>
	* libraries/javalib/java/io/BufferedReader.java: fix bug in
	ready() method and do some rewriting/optimization in the process.

Thu Dec  3 12:14:13 1998  Parmelan, Edouard <EP510777@exchange.FRANCE.NCR.com>

	* kaffe/kaffevm/jar.[ch]: memory map class files if possible

Thu Dec  3 07:51:00 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/Makefile.in (build-classes, install-classes): 
	make these work when builddir != srcdir

Thu Dec  3 07:15:53 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/java/awt/MediaTracker.java (COMPLETED): the
	correct spelling is COMPLETE
	* libraries/javalib/Klasses.jar: regen
	Reported by Alice Dubois <alice.dubois@lemel.fr>

Thu Dec  3 04:52:14 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/native/Throwable.c: include stdlib.h before
 	native.h, otherwise jmalloc.h will define malloc, calloc and free
 	before config-std.h includes stdlib.h

Wed Dec  2 17:03:10 1998  Jason Baker  <jbaker@cs.utah.edu>

	* config/i386/common.h: work-around for gcc/PIC register trashing bug.

Wed Dec  2 14:02:08 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/*: libraries/clib/native/*:
	restructured the core to handle error conditions without deadlock.  
	Plus, changed class states to be closer to Java spec.
	Too many files changed to mention here.  Mention only these two:
	* kaffe/kaffevm/classMethod.c:  fixed class states.  See also 
	FAQ/FAQ.class-states.
	* kaffe/kaffevm/jni.c:  took advantage of exception free core to
	streamline some jni operations.

	* kaffe/kaffevm/systems/unix-jthreads/*:  fixed problem with
	lost wakeup on select.  Fixed HP-UX prob where EWOULDBLOCK != EAGAIN.
	Added dumpThreads for debugging, extending suggestion by Edouard.
	* kaffe/kaffevm/locks: added LOCKCONTENTION debug option as suggested
	by Edouard.  Use "-vmdebug deadlock" to look at deadlocks. 
	* libraries/javalib/java/lang/Thread.java, 
	include/java_lang_Thread.h: added stackOverflowError to java.lang.Thread
	kaffe/kaffevm/intrp/machine.c: 
	kaffe/kaffevm/systems/unix-jthreads/*: implemented StackOverflowError
	(interpreter only!)
	kaffe/kaffevm/systems/unix-internal/*: not implemented in old scheme.
	* kaffe/kaffevm/thread.c, exception.c: changed implementation of
	uncaughtException,  use JNI to invoke Thread.run().
	* include/nets.h:  don't declare h_errno if defined as function.
	* libraries/javalib/java/lang/ClassLoader.java: added loadClassVM() 
	method for safer class loading.
	* test/regression/TestScript:  added new tests for new functionality
        and other stuff:
	DoubleBug, ExceptionInInitializerTest, FindSystemClass, Overflow,
	ProcessClassInst, ProcessClassLockTest, ProcessClassTest.

Wed Dec  2 14:02:07 1998  Jason Baker  <jbaker@cs.utah.edu>

	* kaffe/kaffevm/mem/*:  added new, faster block allocation scheme.
	Use --with-gcblock=new to use it.  Read FAQ/FAQ.gcblock for doc.
	* kaffe/kaffevm/support.[ch]: added support for --with-timing
	option.
	* kaffe/kaffevm/slib.h: added support for finding addresses of shlibs.
	* config/config.h.in, config/config-std.h, configure.in,
	kaffe/kaffevm/Makefile.in:  added configure and make support for new 
	gcblock scheme and --with-timing option.

Wed Dec  2 10:05:32 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/System.java: respond to attempts to
	set securitymanager to null by keeping defaultSecurityManager. 
	* libraries/clib/native/Double.c: handle cap 'F' in Double.valueOf().

Fri Nov 27 10:50:34 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/net/MulticastSocket.java: fix for
	constructor.
	libraries/javalib/java/net/SocketImpl.java: fix for getInetAddress

Tue Nov 24 22:42:13 1998  Tim Wilkinson	<tim@transvirtual.com>

	* include/jni.h, include/jni_cpp.h: added C++ binding for JNI.
	kaffe/kaffevm/external.c, kaffe/kaffe/main.c: renamed 
	librarypath -> libraryhome
	kaffe/kaffevm/jni.c: added verboseCalls to jni.c

Tue Nov 24 19:45:47 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/stackTrace.[ch]: postpone call to findMethodFromPC
	to when stacktrace is really printed.

Tue Nov 24 18:11:50 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/DataInputStream.java: catch
	uncaught IOException
	* libraries/javalib/java/lang/Boolean.java: allow uppercase
	letters in Boolean(String s) constructor
	* libraries/javalib/java/io/ObjectInputStream.java: fix infinite
	loop on EOF bug (NADIA VIEIRA LEAO PEREIRA <972155@dcc.unicamp.br>)

Wed Nov 18 18:14:05 1998  Luciane Lamour Ferreira <972311@dcc.unicamp.br>, Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/javalib/java/io/StreamTokenizer.java (skipLine): unread
	newline back if it is significant;
	(nextTokenType): remove assignment to ttype when a recursive
	invocation has already taken care of this
	(nextTokenType): handle cases in which `/' is not a comment
	character
	(nextTokenType): do not skip newline as whitespace if it is
	significant
	* libraries/javalib/Klasses.jar: regen

Mon Nov 16 17:36:49 1998  Godmar Back  <gback@cs.utah.edu>

	* libraries/javalib/java/awt/ScrollPane.java: make sure we don't 
	pick up the private ScrollPane$Adjustable instead of 
	java.awt.Adjustable.
	* libraries/javalib/java/awt/MenuBar.java: added deprecated 
	countMenus method for HotJava.

Wed Nov 11 13:34:57 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/util/Properties.java: have getProperty
	use super.get.

Tue Nov 10 22:40:39 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* configure.in (nativedir): install run-time (dlopened) libraries
 	in $libdir/kaffe, not within $share/lib
	(ENVIRONMENT) set KAFFELIBRARYPATH too
	(ARCHOS) AC_SUBST it as KAFFE_ARCHOS
	* kaffe/kaffevm/external.c (initNative): do not add
	KAFFEHOME/lib/ARCHOS; rely on JavaVM.librarypath and
	LIBRARYPATH environment variable only
	* kaffe/scripts/kaffe.in (KAFFELIBRARYPATH): set it to
	concatenation of nativedir, any value it may hold, the contents of 
	LD_LIBRARY_PATH and nativedir in its original location within
	KAFFEHOME, for backward compatibility; main.c will try this
	variable before LD_LIBRARY_PATH

Wed Oct 28 22:58:20 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/support.c: fix execute_constructor_v to not look in 
	superclasses for matching constructors.

	* test/regression/TestScript, ConstructorTest.java: new test for that
	from Alexandre.

	* libraries/clib/native/Double.c, Float.c: use appropriate constructor.

	* libraries/javalib/java/lang/ThreadDeath.java
	libraries/javalib/java/util/zip/ZipEntry.java: added no-arg constructor

Tue Oct 27 04:31:35 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts: use bindir instead of prefix/bin

	* kaffe/scripts/kaffe.in: in the comments, refer to datadir
	instead of prefix/share

	* kaffe/scripts/install-jar.in: make it safer with regard to
	command-line input

Tue Oct 27 04:30:04 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/imgjpeg.c: must include <sys/types.h> on
	SunOS 4.1.3

Fri Oct 23 12:52:05 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/config.alias: added ultrix4 alias
	config/mips/ultrix4/: Make.frag, md.[ch], config.frag new files for
	(currently) incomplete MIPS Ultrix4 port.

Fri Oct 23 12:28:47 1998  Dirk Grunwald <grunwald@pa.dec.com>

	* config/alpha/common.h: fixes for alpha port.
	test/regression/TestNative.java: improvements.

Wed Oct 21 18:30:12 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/baseClasses.[ch], kaffe/kaffevm/classMethod.c:
	arrays must implement the cloneable interface.

Wed Oct 21 17:21:12 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/util/BitSet.java: new, improved implementation.
	test/regression/TestScript, BitSetTest.java: tests for above.

Wed Oct 21 08:41:29 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/RandomAccessFile.java,
	libraries/javalib/java/io/DataInputStream.java:
	fix bugs in readLine() method

Mon Oct 19 22:27:56 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/baseClasses.h, kaffe/kaffevm/classMethod.[ch],
	kaffe/kaffevm/support.h, kaffe/kaffevm/mem/gc-incremental.c:
	added support for precise walking of ordinary objects.

	kaffe/kaffevm/debug.[ch]: switched classMethod and gc-incremental
	to new debugging scheme, added options.

Fri, 16 Oct 1998 15:32:18 Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* code-analyse.c, jit/machine.c - Handle unreachable code.

Mon Oct 19 10:43:16 1998  Archie Cobbs <archie@whistle.com>

	* test/regression/{TestScript,ThreadLocalTest}: fix
	ThreadLocalTest output to be deterministic using sort(1)

Tue Oct 13 17:57:34 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: make sure
	SIGVTALRM based polling is always turned on to avoid getting 
	stuck on fds that don't deliver SIGIO when they become writable.

Tue Oct 13 17:28:22 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* Fixes for NCR MP-RAS 3.x (i386/univel_svr4):
	kaffe/kaffevm/jit/basecode.h: constants (``bn'') conflict 
	with sys/vnode.h -> change #defines to enums.

	* config/i386/univel_svr4/:  Page 0 (aka address in range 
	[0, 0x1000[) has read access, so NullPointerException can't retrieve 
	the PC of the current method, remap page 0 as PROT_NONE.

	* configure.in:  Need the library ``mw'' with the library ``m''.
	Need nsl library, but gethostbyname() is not in, add a check with
	gethostname().

Tue Oct 13 16:36:07 1998  Stephen Clawson  <sclawson@cs.utah.edu>

	* libraries/javalib/java/util/Vector.java: fix clone() to invoke
	super.clone()

Mon Oct 12 22:07:24 PDT 1998	Andrew Raymond Trick <a-trick@students.uiuc.edu>

	* java.io.DataInputStream: don't append \n
	* java.io.StreamTokenizer: handled escaped characters.

Mon Oct 12 22:07:24 PDT 1998	Brendon Cahoon <cahoon@meteor.cs.umass.edu>

	* object.c, soft.c: Bug fix for multinewarray - now works when
	  allocating zero length arrays.

Mon Oct 12 22:07:24 PDT 1998	Yasuyui TSUKUI <ytsukui@sf.airnet.ne.jp>

	* Bug fixes for NextStep 3.3.

Fri Oct  9 10:36:19 PDT 1998 Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/external.c: fall back to using LIBRARYPATH if
	nothing specified by Kaffe_JavaVMArgs, for backward compatibility
	(suggested by James Lundblad <jamesl@eecs.berkeley.edu>)
	* libraries/javalib/java/awt/widgets/Scrollbar.java:
	check in bug fix patch from Peter.

Thu Oct  8 12:34:22 PDT 1998 James Lundblad <jamesl@eecs.berkeley.edu>

	* kaffe/kaffevm/jni.c: fix bug in JNI_GetCreatedJavaVMs()

Mon Oct  5 14:16:04 PDT 1998 Transvirtual Technologies <info@transvirtual.com>

        * Version 1.0-b2 of Kaffe OpenVM released.

Thu Oct  1 14:01:43 PDT 1998	Tim Wilkinson	<tim@transvirtual.com>

	* Fixed Sparc/Linux port.
	* Re-added kaffe.applet into class build.
	* Fixed need for ZIP library with PNG library.

Thu, 1 Oct 1998 14:02:05 +0100	Jeppe	<jso@lyngso-industri.dk>

	* QNX patches.

Wed Sep 30 20:24:42 1998  Pavel Roskin <pavel_roskin@geocities.com>

        * config/parisc/common.h: Alignment of 8-byte arguments corrected.
        Buggy smart_args macro removed. All arguments are written to stack and
        then the first four are passed in registers.
        Space on stack is reserved using a variable-size array st_reserve

Tue Sep 29 15:10:07 1998  Patrick Tullmann <tullmann@cs.utah.edu>

	* configure.in: add fmodf to the list of checked functions (needed 
	for change to config/config-math.h
	* config/config-math.h: add javaRemainder and IEEERemainder functions.
	Get rid of remainder, use IEEERemainder and javaRemainder instead.
	* libraries/clib/native/Math.c: have
	java_lang_Math_IEEEremainder() call IEEERemainder().
	* kaffe/kaffe/kaffevm/soft.c, kaffe/kaffe/kaffevm/intrp/icode.h:
	Use javaRemainder() instead of remainder().
	* kaffe/kaffe/kaffevm/jit/icode.c: don't use IEEE remainder
	opcodes in the JIT for remainder operations, always use the soft
	calls.  The Java '%' operator is not the same as the IEEE spec.
	(I think HAVE_rem_double and HAVE_rem_float are useless now.)
	
Fri Sep 25 11:58:18 1998  Maxim Kizub <max@immsp.kiev.ua>

	* libraries/javalib/java/util/Hashtable.java: fix
	ArrayIndexOutOfBoundsException in clear() method

Thu Sep 24 13:38:51 PDT 1998	Tim Wilkinson	<tim@transvirtual.com>

	* Added java.sql package.
	* Added java.math package (not complete).
	* Added Linux/MIPS port.

Thu Sep 24 11:30:20 1998  Archie Cobbs <archie@whistle.com>

	* libraries/javalib/java/io/File.java: fix bug in mkdirs()

Sat Sep 18 16:04:46 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	* libraries/javalib/java/lang/Byte.java: add missing shortValue()
	and make Byte extend Number

Mon Sep 14 15:37:04 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/zip/Deflater.c
	(java_util_zip_Deflater_end): nullify this.dtream when it is freed
	(kaffe_zalloc, kaffe_zfree): new functions for zlib to properly
	interface with the garbage collector
	(java_util_zip_Deflater_init): allocate dstream with the right
	size; set up kaffe_zalloc and kaffe_zfree for zalloc and zfree

Fri Sep 11 22:46:26 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/scripts/: replaced all scripts with .in files,
	let configure insert configuration prefix.

Thu Sep 10 14:12:27 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* config/i386/linux/jit-md.h: handle SA_SIGINFO which is provided
	on more recent Linuxes.
	* kaffe/scripts/compat/appletviewer: it's kaffe.awt.Appletviewer,
	not kaffe.applet.Appletviewer.
	* libraries/clib/awt/X/clr.c: use java.awt.Defaults instead of
	java.awt.DefaultsRGB.
	* libraries/javalib/rebuildLib.in: remove kaffe/applet/*
	* libraries/javalib/java/io/ObjectOutputStream.java: fixed typo.
	* libraries/javalib/java/lang/Math.java: fix to pass Java lint.
	* libraries/javalib/java/util/Random.java: ditto.
	* libraries/javalib/java/awt/event/ContainerEvent.java: added break

Wed Sep  9 16:27:16 1998  Godmar Back  <gback@cs.utah.edu>

	* test/regression/TestScript: fixed output for BeanTest
	libraries/javalib/java/net/PlainSocketImpl.java: removed unneeded
	methods.

Wed Sep  9 16:24:07 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in: if KAFFE_DEBUG is defined to either
	gdb or (some variant of) emacs, start a debugging session with
	working directory and argument list properly set

	* kaffe/scripts/appletviewer: if KAFFE_HOME is not set, look
	for other scripts and/or Kaffe in the directory that contains
	the script, following soft links, so that no environment
	variable has to be set
	* kaffe/scripts/jar: ditto
	* kaffe/scripts/javac: ditto
	* kaffe/scripts/javadoc: ditto
	* kaffe/scripts/javakey: ditto
	* kaffe/scripts/javap: ditto
	* kaffe/scripts/jdb: ditto
	* kaffe/scripts/native2ascii: ditto
	* kaffe/scripts/pizza: ditto
	* kaffe/scripts/pizzadoc: ditto
	* kaffe/scripts/rmic: ditto
	* kaffe/scripts/rmiregistry: ditto
	* kaffe/scripts/serialver: ditto
	* kaffe/scripts/compat/appletviewer: ditto
	* kaffe/scripts/compat/java: ditto
	* kaffe/scripts/compat/javac: ditto
	* kaffe/scripts/compat/javadoc: ditto

	* libraries/javalib/java/lang/Integer.java (toUnsignedString):
	create string from unsigned int, using bit operations
	(toBinaryString, toHexString, toOctalString): implement in terms
	of toUnsignedString, as per the Standard
	* libraries/javalib/java/lang/Long.java (toUnsignedString):
	create string from unsigned long, using bit operations
	(toBinaryString, toHexString, toOctalString): implement in terms
	of toUnsignedString, as per the Standard
	* libraries/javalib/java/lang/Object.java (toString): implemented
	according to the JDK 1.[12] specification

Tue Sep  8 15:57:21 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * kaffe/kaffevm/mem/gc-mem.c: getpagesize() may be declared in
        unistd.h
        * libraries/clib/net/InetAddressImpl.c: gethostname() may be
        declared in unistd.h

        * libraries/clib/native/ByteToCharDefault.c
        (Java_kaffe_io_ByteToCharDefault_convert): do not assume
        implicit int
        * libraries/clib/native/CharToByteDefault.c
        (Java_kaffe_io_CharToByteDefault_convert): ditto
        * libraries/clib/awt/X/evt.c (getSourceIdx,
        Java_java_awt_Toolkit_evtRegisterSource): ditto
        * libraries/clib/awt/X/fnt.c
        (Java_java_awt_Toolkit_fntGetWidths): ditto
        * libraries/clib/awt/X/gra.c (jarray2Points): ditto
        * libraries/clib/awt/X/img.c
        (Java_java_awt_Toolkit_imgSetIdxPels): ditto
        (Java_java_awt_Toolkit_imgSetRGBPels): ditto
        * libraries/clib/awt/X/toolkit.h (java2CString): ditto
        (jchar2CString): ditto

        * libraries/clib/awt/X/fnt.c
        (Java_java_awt_Toolkit_fntStringWidth): `n' is only used
        #ifndef WORDS_BIGENDIAN, so declare it in a new scope, to
        avoid warning
        * libraries/clib/awt/X/gra.c
        (Java_java_awt_Toolkit_graDrawString): ditto

        * libraries/clib/awt/X/img.c
        (Java_java_awt_Toolkit_imgSetIdxPels): cast array index from
        char to int, to avoid warning

        * libraries/clib/awt/X/imggif.c (iOffset, iJumps): define only
        #ifdef HAVE_GIF_LIB_H, to avoid warning

        * libraries/clib/awt/X/imgjpeg.c (readJpeg): zero-initialize
        to avoid warning

Tue Sep  8 15:48:29 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* kaffe/kaffevm/string.c: only call unintern for interned strings.
	Don't abort if strhash is full of DELETED strings.

Mon Sep  7 21:52:32 1998  Steve Ratcliffe <sterat@dial.pipex.com>

	* libraries/javalib/java/lang/Byte.java: add missing byteValue()

Mon Sep  7 21:52:32 1998  Petter Reinholdtsen <pere@cc.uit.no>

	* libraries/javalib/java/lang/BufferedInputStream.java,
	  libraries/javalib/java/lang/FilterInputStream.java:
	  use read(byte[], int, int) instead of read(byte[])

Fri Sep  4 15:40:20 PDT 1998	Tim Wilkinson <tim@transvirtual.com>

	* Added new test application.

Wed Sep  2 18:04:36 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/awt/X/img.c: fix bug in countAlphas()
	* libraries/clib/awt/X/{img,gra}.c: eliminate compiler warnings
	* libraries/javalib/java/net/InetAddress.java,
	libraries/javalib/java/net/URL.java: don't compare strings with ==
	* Klasses.jar: regenerate derived file
	* libraries/javalib/java/io/ClassLoader.java: fix double-slash
	bug in fullResourceName()

Wed Sep  2 16:44:09 PDT 1998	Tim Wilkinson <tim@transvirtual.com>

	* Merged in TVT's current Custom class & native changes.

Sat Aug 29 16:30:41 1998  Archie Cobbs <archie@whistle.com>

	* kaffe/kaffevm/baseClasses.c, kaffe/kaffevm/classMethod.[ch]:
	make sure finalize() is not static; take a small step towards
	supporting unloading classes
	* kaffe/kaffevm/jni.c: don't construct with a non-constructor
	* config/i386/jit-i386.def: eliminate compiler warnings
	* test/HelloWorldApp.java: remove unneeded file

Fri Aug 28 21:44:06 1998  Archie Cobbs <archie@whistle.com>

	* configure, configure.in, FAQ/FAQ.install-root: specify
	install root via ./configure --with-installroot=DIR option
	* libraries/javalib/java/lang/Thread.java,
	libraries/javalib/Klasses.jar: add {Inheritable}ThreadLocal classes
	* libraries/javalib/java/lang/ThreadLocal.java,
	libraries/javalib/java/lang/InheritableThreadLocal.java,
	test/regression/ThreadLocalTest.java: new files
	* test/regression/TestScript: add ThreadLocalTest
	* libraries/javalib/kaffe/util/Assert.java: replace with a
	version that doesn't define methods named "true" and "false".
	* include/Makefile.in: make java_lang_Thread.h, java_lang_Throwable.h,
	and java_lang_ThreadGroup.h derived files using kaffeh
	* java_lang_Thread.h, java_lang_Throwable.h: regenerate automatically
	* kaffe/kaffevm/intrp/machine.c: eliminate compiler warnings

Fri Aug 28 13:34:59 1998  Archie Cobbs <archie@whistle.com>

	* Makefile.in, */Makefile.in, */*/Makefile.in, */*/*/Makefile.in,
	libraries/clib/native/external_wrappers.h.debug (new file):
	add "make derived-files" target, used to regenerate files
	that are derived from other files but checked into the repository
	* libraries/javalib/Makefile.in: "make distclean" shouldn't
	remove Klasses.jar
	* test/HelloWorldApp.class: removed (not used)

Fri Aug 28 10:57:38 1998  Archie Cobbs <archie@whistle.com>

	* libraries/clib/native/ResourceBundle.[ch],
	libraries/clib/native/external_wrappers.h,
	libraries/clib/native/Makefile.in: remove no longer needed files
	* include/java_lang_Object.h, include/java_lang_Thread.h,
	include/nets.h,, kaffe/kaffevm/baseClasses.c,
	kaffe/kaffevm/exception.*, kaffe/kaffevm/mem/gc-mem.c,
	kaffe/kaffevm/systems/unix-*/internal.c,
	kaffe/kaffevm/systems/unix-jthreads/jthread.*,
	libraries/clib/awt/X/*, libraries/clib/math/BigInteger.h,
	libraries/clib/native/Compiler.h, libraries/clib/native/System.h:
	minor fixes to eliminate gcc compiler warnings
	* configure.in: add -Wstrict-prototypes to gcc flags
	* kaffe/kaffeh/support.c: for static methods taking no arguments,
	generate protypes as "method(void)" instead of "method()".
	* libraries/clib/awt/Makefile.in: fix breakage for "make distclean"

Fri Aug 28 09:49:20 1998  Godmar Back  <gback@cs.utah.edu>

	* configure.in, config/config.h.in: 
	libraries/clib/net/PlainSocketImpl.c: added test for netinet/tcp.h
	* config/i386/win32/cygnus/*: moved to config/i386/cygwin32/*
	* libraries/clib/native/ObjectInputStream.c, ObjectOutputStream.c,
	ObjectStreamClass.c: use complete path for system.h to work around
	case-sensitivity for some OSes.

Thu Aug 27 13:53:40 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/scripts/kaffe.in: improve CLASSPATH handling in driver 

Thu Aug 27 13:16:01 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffevm/stackTrace.h: fix STACKTRACEEND for intr to
	take JNI methods into account.

Wed Aug 26 14:27:44 1998  Benjamin Reed  <breed@almaden.ibm.com>

	* libraries/javalib/kaffe/lang/UNIXProcess.java: throw 
	IllegalThreadStateException in exitValue if proc is alive.

Tue Aug 25 15:17:38 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/io/FileInputStream.java: declare native
	open to throw IOException.
	* libraries/javalib/java/util/Stack.java: fixes for synchronization
	and search.
	* libraries/clib/native/*: removed warning for -Wall, in particular
	libraries/clib/native/Field.c: fixed use of == instead of =.
	libraries/clib/native/FileInputStream.c: fixed missing return value.
	include/*: -Wall fixes, added prototypes & includes.
	* kaffe/kaffevm/systems/unix-jthreads/*: -Wall fixes.
	* kaffe/kaffevm/*, kaffe/kaffevm/jit/*: -Wall fixes, jit only

Tue Aug 25 14:39:35 1998  Lee Iverson  <leei@Canada.AI.SRI.COM>

        * configure.in (NET_LIBRARIES): Insert -lnsl and -lsocket only if 
	functions are not already provided by libc.

        * include/jmalloc.h: Change references to __malloc and __free to
          jmalloc and jfree.
        * kaffe/kaffevm/gc.c (jmalloc): New name for __malloc.
          (jfree): New name for __free.
        
        * config/mips/common.h (sysdepCallMethod): Call
          mipsN32CallMethod() for MIPS N32 ABI.
        * config/mips/mips.c (mipsN32CallMethod): Define method for
          calling external functions for MIPS N32 ABI.
        * config/mips/threads.h: #define SP_OFFSET and FP_OFFSET for MIPS
          N32 and N64 ABIs.
        
        * config/mips/irix5/md.c: #include "mips/mips.c"
        * config/mips/irix5/md.h: #include "mips/common.h"

Tue Aug 25 01:08:03 1998  Pavel Roskin <pavel.roskin@ecsoft.co.uk>

	* config/parisc/hpux/md.h: include common.h:
	config/parisc/common.h: new file

Tue Aug 25 00:59:00 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/mem/gc-incremental.c: 
	libraries/clib/native/Thread.c:
	libraries/javalib/java/lang/Thread.java:  we cannot rely on
	Thread.finalize to free thread contexts because subclasses
	may not call super.finalize().  Instead, we invoke finalizeThread
	from finalizeObject in gc-incremental.c

Tue Aug 25 00:57:40 1998  Leigh Stoller <stoller@cs.utah.edu>
	
	* kaffe/kaffevm/mem/gc-incremental.c: fixed nasty bug where
 	objects that were not yet finalized referred to reclaimed
	memory.

Mon Aug 24 19:01:23 1998  Tim Wilkinson <tim@transvirtual.com>

	* kaffe/kaffevm/intrp/icode.h: fixed cvt_int_char. 
	test/regression/CharCvt.java:  added testcase for that.

Thu Aug 20 00:22:02 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* config/alpha/trampolines.c: remove extra trailing #endif

Wed Aug 19 21:54:45 1998  Archie Cobbs  <archie@whistle.com>

	* kaffe/kaffevm/string.c: make sure hashChars works even if len==0
	* libraries/javalib/java/lang/Throwable.java: use toString in
	printStackTrace.
	* configure.in, */Makefile.in: added INSTROOT variable
	FAQ/FAQ.install-root: new file

Wed Aug 19 21:41:53 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * libraries/clib/native/Method.c
	(Java_java_lang_reflect_Method_invoke): assign integer returned by 
	static method to ret.i

Wed Aug 19 18:55:23 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/common.h: Merged version between linux and netbsd/sunos.
	config/m68k/netbsd1/jit-md.h: Change a field name to reflect 
	structural change in 1.0b.
	config/m68k/netbsd1/jit.h: Add trampoline support, and reorder 
	definitions.
	config/m68k/netbsd1/md.h: Move sysdepCallMethod definition from 
	here to 'common.h'.
	config/m68k/sunos4/config.frag: Remove cross development command names.
	config/m68k/sunos4/md.h: Move sysdepCallMethod definition from here 
	to 'common.h'.
	config/m68k/trampolines.c: New file to support trampoline, only 
	for staticlib.

Wed Aug 19 18:03:54 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

        * libraries/clib/native/FileInputStream.c
	(java_io_FileInputStream_available): try file size, from fstat,
	minus current position, from lseek, before trying ioctl and/or select

Wed Aug 19 15:23:07 1998  Pavel Roskin  <Pavel.Roskin@ecsoft.co.uk>

	* config/config-hacks.h, config-io.h: only include winsock if we
	don't have <sys/socket.h>.
	* libraries/clib/native/System.c, File.c: use ../ in include to
	work around case insensitivity on some OSs.
	* config/config.alias: treat all HPPA versions the same.
	* kaffe/kaffe/main.c: avoid empty if() clause for #ifdef'd code.
	* kaffe/kaffevm/slib.h, config/parisc/hpux/config.frag: HPUX-specific
	fixes.

Wed Aug 19 11:45:12 1998  Mike Boilen <mgb@cs.brown.edu>

	* libraries/javalib/java/lang/Runtime.java: fixed typo in parsing cmd.
	libraries/clib/native/UNIXProcess.c: fixed typo in passing of env.

Tue Aug 18 15:24:32 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/ObjectInputStream.java: avoid unwanted
	sign extension in readLong().

Tue Aug 18 15:19:44 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* configure.in (ac_cv_underscore_c_names): no need to run the
	test; linking is enough, and allows it to run even when cross
	compiling

Tue Aug 18 14:03:54 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/clib/Makefile.in: make sure we don't recurse unless we
	have a Makefile.  This works now whether or not object and source
	tree are separate.
	* kaffe/kaffevm/jni.c: added missing return values.

Thu Aug 13 18:17:51 1998  Archie Cobbs <archie@whistle.com>

	* config/config.h.in, libraries/clib/native/FileDescriptor.c:
	  uppercase options HAVE_sync and HAVE_fsync

Thu Aug 13 10:55:45 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Integer.java: fix decoding
	  bugs in decode() and getInteger() methods.

Mon Aug 10 19:58:36 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/jni.c (Kaffe_JNI_wrapper): call installMethodCode
	* kaffe/kaffevm/jit/machine.c: export installMethodCode 

Sun Aug  9 12:06:18 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/net/DatagramSocket.java: modified to
	use DatagramSocketImpl.
	* test/regression/UDPTest.java: new file

Sun Aug  9 11:02:33 1998  Juergen Sonnauer <sonic@az-online.net>

	* kaffe/kaffevm/jni.c: use STRING_DATA in GetStringChars.

Fri Aug  7 16:14:05 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffeh/support.c: fixed bug where `void' return type was
	omitted in JNI declarations.

	* libraries/javalib/java/net/Socket.java: made default constructor
	protected, added Socket(SockImpl) constructor

	* libraries/javalib/java/net/ServerSocket.java: implemented 
	constructor ServerSocket(int, int, InetAddress).

Fri Aug  7 11:47:04 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/BufferedOutputStream.java: don't call 
	flush when buffer is full, just write the buffer.  Use System.arraycopy
	in write(byte[], int, int).  Remove finalizer because 
	BufferedOutputStreams don't get automatically closed or flushed.

	* libraries/javalib/java/io/ByteArrayOutputStream.java:
	ensureCapacity is not public.  Add some extra bytes when growing 
	buffer.  Use System.arraycopy in write(byte[], int, int).

	* libraries/javalib/java/io/CharArrayWriter.java: toCharArray()
	must return only used part of buffer, and it must copy it.

	* libraries/javalib/java/io/DataOutputStream.java: express all 
	writeXXX() with a call to write(int) or write(byte[], int, int) 
	which could be overloaded.  Use a ByteArrayOutputStream in writeUTF().
        In writeInt(), use an array of bytes for correct masking.

	* libraries/javalib/java/io/RandomAccessFile.java: express all 
	writeXXX() with a call to write(int) or write(byte[], int, int) 
	Have writeUTF() use a ByteArrayOutputStream. Fixed writeInt as in
	DataOutputStream.  Fixes to readUTF().   

Thu Aug  6 15:52:40 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* configure.in, config/config.h.in: added test for execvp
	include/jsyscall.h: 
	kaffe/kaffevm/systems/unix-internal/internalCalls.c:
	kaffe/kaffevm/systems/unix-jthreads/internal.c:
	kaffe/kaffevm/systems/unix-jthreads/jthread.c:
	kaffe/kaffevm/systems/unix-jthreads/jthread.h:
  	added forkexec and kill, removed fixfd from syscall interface.
  	implemented fork/exec in jthreads package.
	
	libraries/clib/native/UNIXProcess.[ch]:
	libraries/javalib/kaffe/lang/UNIXProcess.java:
	libraries/clib/native/external_wrappers.h: various fixes;
  	removed notifyReaders.  UNIXProcess.c uses JNI & and the forkexec
	syscall now and is now longer Sun-compatible as far as the native 
	methods go.

	test/regression/TestScript: updated Bean for new string hash.
	test/regression/ProcessTest.java: new file.

Wed Aug  5 21:38:12 1998 Alexandre Oliva  <oliva@dcc.unicamp.br>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c
	(jthreadedFileDescriptor): ENOTTY is an acceptable error for an
	ioctl FIOASYNC call
	
Wed Aug  5 15:39:40 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/String.java:
	kaffe/kaffevm/string.c: updated hash function to comply with 1.2,
	patch provided by <archie@whistle.com>

Wed Aug  5 13:21:06 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/lang/{Number|Double|Float|Long|Short|
	Integer|Byte}.java:  byteValue() and shortValue() are not 
	abstract, they can be implemented in terms of intValue();

Tue Aug  4 12:00:54 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Object.java: make sure wait(0,1)
	doesn't block.

Tue Aug  4 11:57:54 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/Writer.java|PrintWriter.java:
	synchronized println and write method to ensure that lines are
	written as a whole.

Tue Aug  4 10:48:23 1998  Wolfgang Muees <wolfgang@wmsickte.escape.de>

	* libraries/javalib/java/util/ResourceBundle.java: don't call
	newInstance in getSpecificBundle if object cannot be cast to Bundle.

Sun Aug  2 10:33:16 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	*libraries/javalib/java/net/Socket.java
	libraries/javalib/java/net/DatagramSocket.java: Corrected
	interface of setSoTimeout from (boolean, int) to (int).  Added
	DatagramSocket.getLocalAddress()

Sat Aug  1 12:16:30 1998  Petter Reinholdtsen <pere@td.org.uit.no>

	* libraries/javalib/java/net/Socket.java: added getLocalAddress()
	and fixed setLinger().

Fri Jul 31 19:22:58 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/File.java: made isAbsolute() public

Thu Jul 30 22:00:49 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/clib/net/Plain*SocketImpl.[ch]|SocketOptions.h:
	libraries/javalib/java/net/PlainDatagramSocketImpl.java,
	PlainSocketImpl.java, Socket.java, SocketImpl.java,
	SocketOptions.java:  implemented various socket options.

Thu Jul 30 22:00:49 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/Integer.java|Number.java: 
	added support for serialization.

	* libraries/javalib/java/net/DatagramSocket.java: for now, use 
	PlainDatagramSocketImpl.java to implement a socket.

Thu Jul 30 14:47:55 1998  Archie Cobbs  <archie@whistle.com>

	* kaffe/kaffevm/locks.c: fix for throwing IllegalMonitorStateException 
	if lock is not held.

Wed Jul 29 14:41:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/File.java: fixed getParent to not 
	modify the stored path

Wed Jul 29 10:43:01 1998  Edouard Parmelan <Edouard.Parmelan@France.NCR.COM>

	* libraries/javalib/java/io/BufferedWriter: fixed flush chain
	libraries/javalib/java/io/CharArrayWriter.java: fixed toString()
	kaffe/scripts/*: protect arguments with "@$"
	libraries/javalib/java/text/ParseException.java: made constructor
	public.

Tue Jul 28 15:27:56 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* configure.in, configure, config/config.h.in: added check for
	snprintf.

	* kaffe/kaffevm/errors.h, soft.c: made classcast exceptions more 
	informative.

	* libraries/javalib/java/lang/Class.java:
	libraries/javalib/java/util/ResourceBundle.java: fixed problems
	that were caused by getClassLoader() fix.

	* config/i386/jit-i386.def, kaffe/kaffevm/debug.[ch]: PJB's 
	<pjb@imaginet.fr> work-around to allow debugging under Linux.

Mon Jul 27 18:14:44 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/String.java: fixed String.
	equalsIgnoreCase() to work correctly when null is passed as argument.

Mon Jul 27 09:32:05 1998  Giles Lean  <giles@nemeton.com.au>

	* libraries/javalib/java/io/File.java: fix for getParent to return
	"/" for "/tmp".

Sun Jul 26 14:33:54 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/io/FileInputStream.java:  map IOException 
	to FileNotFoundException to comply with spec.

	* libraries/javalib/java/lang/ThreadGroup.java: fixed printThreads 
	and printGroups to deal with null entries which may exist  
	after threads or groups are removed.

Sat Jul 25 12:57:56 1998  Even Holen  <evenh@pvv.ntnu.no>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c: patches to get
	jthreadedFileDescriptor working under HP-UX 10.x

Thu Jul 23 23:12:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/util/Hashtable.java: added serialization.

Thu Jul 23 18:47:57 1998  Brian Burton <brian@burton-computer.com>

	* libraries/javalib/java/io/RandomAccessFile.java: use call 
	writeBytes instead of write to avoid writing byte by byte.

Thu Jul 23 15:31:28 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* kaffe/kaffevm/threads.c: fixed race condition at thread startup 
	time where privateInfo wasn't available to a newly started thread.

Thu Jul 23 11:43:35 1998  Brian Burton <brian@burton-computer.com>

	* libraries/javalib/java/io/StreamTokenizer.java: fix nextToken
	to return string delimiter in ttype.

Wed Jul 22 22:52:09 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/reflect/Field.java: fixed Field.getType()
	* libraries/javalib/java/util/Hashtable.java: fixed clone method
	  to properly clone subclasses.

Wed Jul 22 17:08:44 1998  Stephen Clawson  <sclawson@cs.utah.edu>

	* libraries/javalib/java/net/InetAddress.java: use equals instead 
	  of == to check for string equality.

Wed Jul 22 16:39:56 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/clib/Makefile.in: make sure that we only recurse 
	into existing subdirectories.

Tue Jul 21 19:37:59 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/javalib/java/lang/Class.java: fixed bug where 
	getClassLoader() returned a non-null object for classes that
	were not loaded by a class loader.

Mon Jul 20 22:16:16 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Integer.java: fix for parseInt.
	* libraries/javalib/java/util/Vector.java: check for array index
	  out of bounds in elementAt

Mon Jul 20 19:06:48 1998  Raffaele Sena <raff@aromatic.com>

	* config/arm/linux, config/config-hacks.h, config/arm/common.h:
	    fixes for NetWinder/Linux port.

Mon Jul 20 18:41:19 1998  Godmar Back  <gback@marker.cs.utah.edu>

	* libraries/clib/native/Makefile.in: add KAFFEVMFLAGS to ALL_CFLAGS 
	  to make sure things like NO_SHARED_LIBRARIES are known when compiling
	  the native subdirectory.

	* kaffe/kaffevm/findInJar.c: fix to allow for read-only strings
	  as classpath.

Sun Jul 19 23:46:30 1998  Rick Greer <rick@sandpiper.com>

	* config/alpha/common.h: system-dependent stuff for alpha/linux

Sun Jul 19 23:28:02 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/netbsd1/config.frag|md.h: system/configuration stuff

	* include/java_lang_ThreadGroup.h:  removed vmAllowSuspension field.
	  kaffe/kaffevm/thread.c: removed vmAllowSuspension field.

Sun Jul 19 19:54:21 1998  Archie Cobbs  <archie@whistle.com>

	* libraries/javalib/java/lang/Class.java: added missing slash
	  in fullResourceName.

	* kaffe/kaffevm/jni.c: fixed problem where JNI would signal
	  out of bound if last array element was included.

	* kaffe/kaffevm/jar.c: fixed problem with incorrectly locating
	  file data inside JAR/ZIP files.  See cvs log entry for more expl.

Sun Jul 19 19:31:07 1998  Godmar Back  <gback@cs.utah.edu>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.h: fixed race 
	  condition where virtual timer was armed too early.

Sun Jul 19 19:31:07 1998  Raffaele Sena  <raff@aromatic.com>

	* kaffe/kaffevm/intrp/icode.h: fixed I2C

Tue Jul 14 22:21:42 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* libraries/clib/awt/X/toolkit.h: #include stdlib.h before
	anything else, because some X implementations #define calloc

        * libraries/clib/awt/X/img.c: include stdlib.h (for size_t)
        before jpeglib.h

        * libraries/clib/native/Makefile.in: use CPPFLAGS and LDFLAGS
        from configure environment
        * libraries/clib/zip/Makefile.in: ditto
        * libraries/clib/math/Makefile.in: ditto
        * kaffe/kaffe/Makefile.in: ditto
        * kaffe/kaffevm/Makefile.in: ditto
        * libraries/clib/management/Makefile.in: ditto
        * libraries/clib/awt/Makefile.in: ditto

Tue Jul 14 15:05:28 1998  Kiyo Inaba <inaba@src.ricoh.co.jp>

	* config/m68k/sunos4/md.h, config.frag:  machine-specific macros
	  sysdepCallMethod, ALIGNMENT_OF_SIZE.

Tue Jul 14 00:00:00 1998  Transvirtual Technologies     <info@transvirtual.com>

        * Version 1.0-b1 of Kaffe OpenVM released.
          The first complete Kaffe release, including all Java libraries.

See ChangeLog.1 for earlier changes.

Local Variables:
add-log-time-format: current-time-string
End:
