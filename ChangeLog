2005-04-18  Dalibor Topic  <robilad@kaffe.org>

        Resynced with GNU Classpath.

	2005-03-30  Michael Koch  <konqueror@gmx.de>

        * gnu/xml/aelfred2/XmlParser.java:
        Revert my typo fix.

2005-04-18  Dalibor Topic  <robilad@kaffe.org>

        Resynced with GNU Classpath.

	2005-03-30  Michael Koch  <konqueror@gmx.de>

        * java/awt/geom/CubicCurve2D.java,
        java/awt/geom/QuadCurve2D.java:
        Fixed typo in name of Brian Cough.

2005-04-18  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c:
	Re-indented to match GNU Classpath's indentation style more closely.

2005-04-18  Michael Franz  <mvfranz@gmail.com>
	
	* FAQ/FAQ.debugging: Added new informations on how to debug kaffe
	easily.

2005-04-18  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-29  Jeroen Frijters  <jeroen@frijters.net>

        * gnu/classpath/SystemProperties.java (static): Converted encoding
        aliases to lower case and removed redudant aliases.

2005-04-18  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-28  Tom Tromey  <tromey@redhat.com>

        * java/lang/ClassLoader.java (loadClass): Resolve class even if
        it was already found.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-28  Tom Tromey  <tromey@redhat.com>

        * java/net/URL.java (DEFAULT_SEARCH_PATH): Added
        org.metastatic.jessie.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-28  Sven de Marothy  <sven@physto.se>

        * gnu/java/io/decode/DecoderUnicodeBig.java,
        * gnu/java/io/decode/DecoderUnicodeLittle.java,
        * gnu/java/io/encode/EncoderUnicodeBig.java,
        * gnu/java/io/encode/EncoderUnicodeLittle.java:
        New files.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-26  Chris Burdess  <dog@gnu.org>

        * gnu/xml/dom/DomNode.java (notifyNode): grow listener array as
        required.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-26  Jeroen Frijters  <jeroen@frijters.net>

        * java/awt/image/PixelGrabber.java (setPixels(int,int,int,int,
        ColorModel,byte[],int,int): Fixed byte to int conversion.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-26  Jeroen Frijters  <jeroen@frijters.net>

        * javax/imageio/spi/IIORegistry.java (IIORegistry):
        Don't assume that awt Toolkit is always ClasspathToolkit.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-23  Andrew John Hughes  <gnu_andrew@member.fsf.org>

        * gnu/xml/dom/html2/DomHTMLParser.java
        Changed 'enum' references to become 'enumeration'.

	2005-03-21  Audrius Meskauskas  <audriusa@bluewin.ch>

        * gnu/xml/dom/html2/DomHTMLParser.java: New file.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.
	
	2005-04-11  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* org/omg/CORBA/Request.java:
	(send_deferred): Added missing 'abstract' keyword.

	2005-04-10  Audrius Meskauskas  <audriusa@bluewin.ch>	

	* org/omg/CORBA/PRIVATE_MEMBER.java,
	org/omg/CORBA/PUBLIC_MEMBER.java,
	org/omg/CORBA/Request.java,
	org/omg/CORBA/StructMember.java,
	org/omg/CORBA/UnionMember.java,
	org/omg/CORBA/UNSUPPORTED_POLICY.java,
	org/omg/CORBA/UNSUPPORTED_POLICY_VALUE.java,
	org/omg/CORBA/ValueMember.java,
	org/omg/CORBA/VM_ABSTRACT.java,
	org/omg/CORBA/VM_CUSTOM.java,
	org/omg/CORBA/VM_NONE.java,
	org/omg/CORBA/VM_TRUNCATABLE.java,
	org/omg/CORBA/WrongTransaction.java,
	org/omg/CORBA/BAD_POLICY.java,
	org/omg/CORBA/BAD_POLICY_TYPE.java,
	org/omg/CORBA/BAD_POLICY_VALUE.java,
	org/omg/CORBA/Environment.java,
	org/omg/CORBA/IDLType.java,
	org/omg/CORBA/OMGVMCID.java: new files.

	2005-04-09  Audrius Meskauskas  <audriusa@bluewin.ch>	

	* org/omg/CORBA/DynAnyPackage/Invalid.java,
	org/omg/CORBA/DynAnyPackage/InvalidSeq.java,
	org/omg/CORBA/DynAnyPackage/InvalidValue.java,
	org/omg/CORBA/DynAnyPackage/TypeMismatch.java,
	org/omg/CORBA/DynAnyPackage/package.html: New files.

	2005-04-06   Audrius Meskauskas  <audriusa@bluewin.ch>

	* org/omg/CORBA/CTX_RESTRICT_SCOPE.java,
	org/omg/CORBA/ExceptionList.java,
	org/omg/CORBA/NVList.java,
	PrincipalHolder.java: New classes.
	* org/omg/CORBA/Context.java: Completing
	part, dependent from classes above,
	org/omg/CORBA/MARSHAL.java: accessibility fixes.

	2005-03-31  Audrius Meskauskas  <audriusa@bluewin.ch>

	* org/omg/CORBA/ORBPackage/InconsistentTypeCode.java,
	org/omg/CORBA/ORBPackage/InvalidName.java,
	org/omg/CORBA/ORBPackage/package.html: New files.

	2005-03-19  Audrius Meskauskas  <audriusa@bluewin.ch>

	* org/omg/CORBA/AnySeqHolder.java,
	org/omg/CORBA/AnySeqHelper.java,
	org/omg/CORBA/CompletionStatusHelper.java:
	New files.

2005-04-17  Guilhem Lavaux  <guilhem@kaffe.org>

	* config/generic/gentypes.h: New file.

	* config/alpha/common.h,
	config/arm/common.h, 
	config/i386/atomic.h,
	config/i386/common.h,
	config/ia64/common.h, 
	config/m68k/common.h,
	config/mips/common.h,
	config/parisc/common.h,
	config/powerpc/common.h,
	config/s390/common.h,
	config/sh/common.h,
	config/sparc/common.h,
	config/x86_64/common.h: Include gentypes.h

	* config/generic/comparexch.h: Fixed include.
	
2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/gnu/classpath/VMSystemProperties.java: (preInit)
	Set java.specification.version to 1.4.

2005-04-17  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/kaffe/version.c (printShortVersion): Changed first string
	to something more like JDK to make Kaffe useable from within 
	NetBeans 4.0 as a runtime.

	* libraries/javalib/gnu/classpath/VMSystemProperties.java: (preInit)
	Set java.vm.version to 1.1.5+cvs.

2005-04-16  Kurt Roeckx <kurt@roeckx.be>

	* kaffe/kaffevm/kaffe-gc/gc-incremental.c
	(objectSizesPrint): Fixed dprintf format.
	
	* libraries/clib/nio/FileChannelImpl.c
	(Java_gnu_java_nio_channels_FileChannelImpl_read__): Fixed ret size.
	(Java_gnu_java_nio_channels_FileChannelImpl_write__I): Fixed ret size.

2005-04-16  Guilhem Lavaux  <guilhem@kaffe.org>

        * libraries/clib/nio/gnu_java_nio_VMSelector.c
        (Java_gnu_java_nio_VMSelector_select): Use strerror instead of
        strerror_r if it is not available.
        
2005-04-15  Guilhem Lavaux  <guilhem@kaffe.org>,
	Nektarios K. Papadopoulos <npapadop@inaccessnetworks.com>

	* m4/libxslt.m4: Added inclusion of xsltconfig.h

	* configure: Regenerated.
	
2005-04-15  Mike Castle <dalgoda@ix.netcom.com>

	* libraries/clib/awt/classpath-gtk/gtk-peer/Makefile.am
	(libjawt_la_CFLAGS): Fixed include path.

	* libraries/clib/awt/classpath-awt/gtk-peer/Makefile.in:
	Regenerated.
	
2005-04-14  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffe/version.c: Converted strings to intl strings.

	* po/POTFILES.in: Added kaffe/kaffe/version.c

	* po/kaffe.pot: Regenerated.

	* po/fr.po: Updated.

	* libraries/javalib/java/lang/ref/Reference.java
	(cleared): New field.
	(clear): Set cleared.
	(get): Return null if cleared is set.

	* po/zh_CN.po, po/zh_TW.po: Updated automatically.
	
2005-04-13  Jim Huang  <jserv@kaffe.org>

	* po/zh_CN.po,
	po/LINGUAS:
	Simplified Chinese translation contributed by DexterK Kidd 
	<dexterkidd@gmail.com>.

2005-04-12  Guilhem Lavaux  <guilhem@kaffe.org>

	* libraries/javalib/java/lang/ref/Reference.java
	(cleared): New field.
	(get): Return null if cleared is set.
	(clear): Set cleared.

2005-04-12  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffe/version.c
	(printShortVersion): Print the default heap sizes and stack size.

	* kaffe/kaffevm/classMethod.h
	(Hjava_lang_Class): Removed unused finalizer_call.

	* kaffe/kaffevm/gcFuncs.c
	(initCollector): Strings/arrays must be finalized in case a weak
	reference is attached to the object.

	* kaffe/kaffevm/reference.c
	(KaffeVM_isReferenced): Fixed though the function is currently
	unused.
	(referenceObjectFinalizer, referenceFinalizer): Added DBG
	instructions.

	* kaffe/kaffevm/thread.c, kaffe/kaffevm/thread.h
	(attachFakedThreadInstance): Renamed into...
	(KaffeVM_attachFakedThreadInstance): Renamed from
	attachFakedThreadInstance.
	(KaffeVM_detachCurrenThread): New dummy function.

	* kaffe/kaffevm/utf8const.c: Removed a few 'if !defined(KAFFEH)'.

	* kaffe/kaffevm/jni/jni.c
	(KaffeJNI_AttachThread, KaffeJNI_AttachThreadAsDaemon): Use
	KaffeVM_* function now.
	
	* kaffe/kaffevm/kaffe-gc/gc-incremental.c
	(finishGC): Clarified a comment.
	(finaliserJob): Do not clear the stack anymore. Removed iLockRoot
	renamed. Invoke KaffeGC_clearWeakRef before finalizing.

	* kaffe/kaffevm/kaffe-gc/gc-refs.h
	(weakRefObject): Added new fields to keep track precisely of the
	allocation state of the object.

	* kaffe/kaffevm/kaffe-gc/gc-refs.c
	(resizeWeakReferenceObject): New auxiliary function.
	(KaffeGC_rmWeakRef): Check whether the object has been removed during GC calls.
	Do not resize dynamically the reference array.
	(KaffeGC_addWeakRef): Use resizeWeakReferenceObject.
	(KaffeGC_clearWeakRefs): Be gentle when destroying the weak
	reference object.

	* libraries/javalib/java/lang/ref/Reference.java
	(clear): Do not clear referent but clear queue according to Java API.
	
2005-04-12  Guilhem Lavaux  <guilhem@kaffe.org>
	Nektarios K. Papadopoulos <npapadop@inaccessnetworks.com>
	
	* kaffe/kaffevm/systems/unix-pthreads/syscalls.c
	(jthreadedRecvFrom): Fixed parameter to waitForTimeout.

2005-04-11  Rei Odaira  <ray@is.s.u-tokyo.ac.jp>

	* kaffe/kaffevm/jit3/icode.c
	(div_int_const_optimize): Fixed rounding.

	* test/regression/NegativeDivideConst.java:
	Check the rounding result.
	
2005-04-11  Guilhem Lavaux  <guilhem@kaffe.org>
	Rei Odaira <ray@is.s.u-tokyo.ac.jp>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c: Patched again to use
	jthread syscall system.

2005-04-10  Guilhem Lavaux  <guilhem@kaffe.org>

	* test/jni/Makefile.am: Fixed dlopened libraries.

	* test/jni/Makefile.in: Regenerated.

2005-04-10  Guilhem Lavaux  <guilhem@kaffe.org>

	* configure.ac: Reset to 1.1.x-cvs
	
	* configure: Regenerated.

	* libraries/clib/nio/gnu_java_nio_VMSelector.c: Merged back from GNU
	Classpath with the right indentation.

2005-04-06  Guilhem Lavaux  <guilhem@kaffe.org>

	* Makefile.am
	(EXTRA_DIST): Added FAQ/FAQ.references.
	
	* kaffe/kaffevm/jni/jni-base.c
	(JNI_GetDefaultJavaVMInitArgs,
	JNI_CreateJavaVM): Updated support to JNI 1.4.
	
	* kaffe/kaffevm/jni/jni-helpers.c
	(KaffeJNI_NewDirectByteBuffer,
	KaffeJNI_GetDirectBufferAddress,
	KaffeJNI_GetDirectBufferCapacity): New functions.
	(KaffeJNI_FromReflectedMethod,
	KaffeJNI_FromReflectedField): Protected JNI call.
	
	* kaffe/kaffevm/jni/jni_funcs.h
	(KaffeJNI_NewDirectByteBuffer,
	KaffeJNI_GetDirectBufferAddress,
	KaffeJNI_GetDirectBufferCapacity): New functions.

	* kaffe/kaffevm/jni/jni.c
	(Kaffe_JNINativeInterface): Added the 3 new JNI calls.
	(Kaffe_GetEnv): Updated support to JNI 1.4.

	* libraries/clib/native/java_lang_ref_Reference.c
	(create): Check whether the referenced object is NULL.

	* libraries/clib/nio/java_nio_VMDirectByteBuffer.c:
	Imported latest version from GNU Classpath.

	* libraries/javalib/kaffe/lang/PrimordialClassLoader.java:
	Authorize loading gnu/classpath/RawData* classes from the user
	class loader.

	* Makefile.in: Regenerated.
	
2005-04-05  Supreet Sethi  <supreet@linux-delhi.org>

	* include/jsyscall.h:
	Adjust the sequence of including <sys/types.h> to fix build on 
	FreeBSD 4.x.

2005-04-05  Jim Huang  <jserv@kaffe.org>

	* kaffe/kaffevm/boehm-gc/gc2.c (createGC),
	kaffe/kaffevm/boehm-gc/gc2.h:
	Fix boehm-gc build.

2005-04-05  Dalibor Topic  <robilad@kaffe.org>

	* README: Set version to 1.1.5.
	* RELEASE-NOTES: Written.
	* configure.ac: Set version to 1.1.5.

2005-04-04  Jim Huang  <jserv@kaffe.org>

	Resynced with GNU Classpath.

	2005-04-01  Michael Koch  <konqueror@gmx.de>

	* java/io/PipedInputStream.java
	(read): Make sure a positive byte value is returned. Revised javadoc.
	Thanks to Olafur Bragason for reporting these bugs.

2005-04-04  Guilhem Lavaux  <guilhem@kaffe.org>,

	* FAQ/FAQ.references: New file

2005-04-04  Dalibor Topic  <robilad@kaffe.org>

	* config/Makefile.am:
	Added x86-64-freebsd2 port.

2005-04-03  Guilhem Lavaux  <guilhem@kaffe.org>,
	Mark Wielaard <mark@klomp.org>
	
	* libraries/javalib/java/lang/System.java
	(arraycopy): Cast to long to prevent integer overflow.

2005-04-03  Dalibor Topic  <robilad@kaffe.org>

	* config/ia64/hpux/config.frag,
	config/ia64/hpux/md.h: New files for ia64-hpux port. 
	It was a work of minutes to copy the files around and get
	Kaffe to build on the ia64-hpux box. 

	It works as well as alpha-linux-intrp-pthreads, passing 
	11 regression tests. I assume there is some 64 bit issue 
	plaguing both.

	* config/Makefile.am:
	Added new files.

	* README, WHATSNEW: Added the new port.

2005-04-03  Dalibor Topic  <robilad@kaffe.org>

	* config/ia64/sysdepCallMethod.h:
	Added guards.

2005-04-03  Guilhem Lavaux  <guilhem@kaffe.org>

	* libraries/clib/native/ClassLoader.c
	(defineClass): Throw an exception if length is negative.

	Reported by: Christian Thalinger <twisti@complang.tuwien.ac.at>

2005-04-03  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c: 
	Added guards for <sys/select.h> and <sys/time.h>.

2005-04-03  Guilhem Lavaux  <guilhem@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c
	(select0): Fixed typo.

2005-04-03  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c
	(jthreadedSelect): Prepare dummy sets in case one of the parameter
	is NULL.

	* libraries/clib/nio/gnu_java_nio_VMSelector.c
	(helper_select): Return the error code.
	(select0): Decode the result code.
	
2005-04-03  Rei Odaira <ray@is.s.u-tokyo.ac.jp>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c
	(jthreadedSelect): Fixed timeout handling, fdset handling. maxFd,
	readsPending, writesPending updated properly.

	* libraries/clib/nio/gnu_java_nio_VMSelector.c
	(helper_select, select0): Use a negative value to avoid confusion
	between the number of filedescriptor and the error value returned
	by select.

	* libraries/javalib/java/nio/channels/spi/AbstractSelectableChannel.java
	(register): Check for blocking state.

2005-04-03  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/kaffevm/systems/unix-pthreads/Makefile.am 
	(libkthread_la_SOURCES): Added header files from 
	EXTRA_DIST.

2005-04-02  Dalibor Topic  <robilad@kaffe.org>

	* config/powerpc/darwin/config.frag:
	Added -no-cpp-precomp for darwin 5.

2005-04-02  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/rebuildLib.in (LIBDIR): 
	Removed another CDPATH usage.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-04-02  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/Makefile.am.in 
	[USE_PRECOMPILED_RT_JAR] (compile-tools-classes): 
	New target. 
	(tools.jar) Build only tools.jar classes.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-04-02  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/systems/unix-jthreads/jthread.c,
	kaffe/kaffevm/systems/unix-jthreads/jthread.h:
	(jthread_is_blocking): Added to the API for compatibility with
	unix-pthreads.

	* kaffe/kaffevm/systems/unix-pthreads/thread-impl.c,
	kaffe/kaffevm/systems/unix-pthreads/thread-internal.h:
	(jthread_exit): Changed shutdown loop to take into account
	modifications to activeThreads list.
	(jthread_is_blocking): New jthread call.
	
	* kaffe/kaffevm/systems/unix-pthreads/lock-impl.c
	(clearBlockState): Set active to 0 when exiting.

	* kaffe/kaffevm/systems/unix-pthreads/syscalls.c
	(jthreadedRecvFrom): Fixed logic to avoid eating all CPU.
	
	* config/katomic.h (__atomic_val_bysize, __atomic_bool_bysize): 
	If gcc is 2.95 then the syntax is also different.

2005-04-02  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/Makefile.am.in: (compile-classes)
	Removed CDPATH=: command that was confusing zsh on Darwin5.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-04-02  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/systems/unix-pthreads/thread-impl.c
	(jthread_exit): Removed the use of pthread_cancel during
	final shutdown.

	* kaffe/kaffevm/systems/unix-pthreads/lock-impl.c
	(clearBlockState): Do not exit if the thread is in BS_THREAD
	blockstate it means the mutex be released.

2005-04-02  Riccardo Mottola <zuse@libero.it>

	* FAQ/FAQ.Known-Bugs:
	Added information on ulimit workarounds for old Darwin 
	systems.

2005-04-01  Dalibor Topic  <robilad@kaffe.org>

	* config/arm/common.h,
	config/i386/common.h,
	config/ia64/common.h,
	config/m68k/common.h,
	config/mips/common.h,
	config/parisc/common.h,
	config/powerpc/common.h,
	config/s390/common.h,
	config/sh/common.h,
	config/sparc/common.h,
	config/x86_64/common.h:
	Include gccbuiltin.h.

	Reported by:  gian paolo ciceri <gp.ciceri@acm.org>,
		      Riccardo Mottola <zuse@libero.it>

2005-04-01  gian paolo ciceri <gp.ciceri@acm.org>

	* config/katomic.h (__atomic_val_bysize, __atomic_bool_bysize): 
	Added versions for gcc 2.x variadic macro format.

2005-04-01  Supreet Sethi  <supreet@linux-delhi.org>

	* configure.ac: Check for uintmax_t and intmax_t.

	* config/i386/atomic.h: Only use uintmax_t and intmax_t if
	the types are available.

2005-04-01  Guilhem Lavaux  <guilhem@kaffe.org>

	* java/awt/image/IndexColorModel.java
	(getRGB): Check if pixel is negative.

2005-04-01  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/systems/unix-pthreads/thread-impl.c
	(jthread_suspendall, jthread_unsuspendall): Check whether the thread
	subsystem has been initialized as some architecture needs to invoke it
	for compare and exchange.

2005-04-01  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/locks.c
	(waitCond): Unlock completely the mutex (the lock may be recursive).

2005-04-01  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/Makefile.am.in (clean-local): 
	Remove tools.jar as well when cleaning up.
	
2005-04-01  Dalibor Topic  <robilad@kaffe.org>
	
	Define __builtin_expected away on gcc < 3.0

	* include/Makefile.am (noinst_HEADERS): Added gccbuiltin.h.

	* include/defs.h: Include gccbuiltin.h.

	* include/gccbuiltin.h: New file. Taken from gcc CVS
	file gcc/gcc/system.h.

	Reported by:  Riccardo Mottola <zuse@libero.it>
	
2005-04-01  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c (Java_gnu_java_nio_VMSelector_select): 
	Use strerror if strerror_r is not available.

	Reported by:  Michael Franz <mvfranz@gmail.com>,
	              Riccardo Mottola <zuse@libero.it>

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* TODO: Removed completed tasks.

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* config/i386/threads.h (THREADSTACKSIZE): Doubled to fix
	stack size problem with nice's bootstrap.

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	Moved gnu.bytecode into tools.jar to fix problems
	with nice's bootstrap.

	Reported by:  Daniel Bonniot  <bonniot@users.sourceforge.net>

	* kaffe/scripts/javap.in: Add tools.jar to classpath.

	* kaffe/scripts/kaffe.in: Don't add tools.jar to BOOTCLASSPATH.

	* libraries/javalib/Makefile.am.in: (jrelib_DATA) Added tools.jar.
	(JAR_CMD2) Don't add gnu.bytecode and gnu.classpath.tools.javap
	to rt.jar.
	(JAR_CMD7) Put gnu.bytecode and gnu.classpath.tools.javap into
	tools.jar.
	(tools.jar) New target.

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* config/arm/linux/md.c: Added missing arm/jit.h include.

	Reported by:  gian paolo ciceri <gp.ciceri@acm.org>
	
2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* config/arm/linux/md.c: Added missing md.h include.

	Reported by:  gian paolo ciceri <gp.ciceri@acm.org>
	
2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/kaffevm/Makefile.am (libkaffevm_la_DEPENDENCIES): 
	Added libreplace.

	Reported by:  Michael Franz <mvfranz@gmail.com>
	
2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* test/regression/TestScript.in (SECURITY_PROVIDER_URL): 
	Use absolute path instead of realtive one to avoid problems with
	build and source directories being on different NFS volumes.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* configure.ac: Set warning leel back to 
	-Wall to sort the most important ones out first.

2005-03-31  Dalibor Topic  <robilad@kaffe.org>

	* config/i386/jit3-i386.def,
	include/errors.h,
	include/kaffe_jni.h,
	kaffe/kaffevm/baseClasses.c,
	kaffe/kaffevm/exception.c,
	kaffe/kaffevm/exception.h,
	kaffe/kaffevm/soft.h,
	kaffe/kaffevm/support.h,
	kaffe/kaffevm/thread.c,
	kaffe/kaffevm/jit3/basecode.c,
	kaffe/kaffevm/jit3/codeproto.h,
	libraries/clib/native/Runtime.c:
	Removed NONRETURNING modifiers.
	
	* kaffe/kaffevm/access.h,
	kaffe/kaffevm/access.c (checkAccessFlags):
	Return const char*.

	* kaffe/kaffevm/exception.c (vmExcept_getSyncObj):
	Only define for interpreter.

	* kaffe/kaffevm/hashtab.c,
	kaffe/kaffevm/hashtab.h:
	Return const void *.

	* kaffe/kaffevm/ksem.c:
	Fixed comment.

	* kaffe/kaffevm/ksem.h: Indentation changes.

	* kaffe/kaffevm/reference.c:
	(KaffeVM_isReferenced) Made ref const.

	* kaffe/kaffevm/string.c,
	kaffe/kaffevm/utf8const.c,
	kaffe/kaffevm/jni/jni-string.c:
	Added casts to fix warnings.

	* kaffe/kaffevm/jit/machine.h,
	kaffe/kaffevm/jit/methodcalls.c,
	kaffe/kaffevm/jit3/registers.c:
	Added missing includes.

	* kaffe/kaffevm/jni/jni.c:
	Use THREAD_JNIENV instead of accessing the jniEnv
	field directly.

	* kaffe/kaffevm/systems/unix-pthreads/lock-impl.c,
	kaffe/kaffevm/systems/unix-pthreads/lock-impl.h:
	Whitespace fixes.

	* kaffe/kaffevm/verifier/verify2.c:
	(checkField) Made reason const.

	* libraries/clib/native/Array.c,
	libraries/clib/native/Class.c:
	Made all codepaths return from non-void functions.
	
2005-03-31  Gerrit P. Haase <gp@familiehaase.de>

        * kaffe/jvmpi/Makefile.am,
        kaffe/kaffe/Makefile.am,
        kaffe/kaffevm/Makefile.am,
        kaffe/xprof/Makefile.am,
        libraries/clib/awt/X/Makefile.am,
        libraries/clib/awt/nano-X/Makefile.am,
        libraries/clib/awt/qt/Makefile.am,
        libraries/clib/io/Makefile.am,
        libraries/clib/management/Makefile.am,
        libraries/clib/math/Makefile.am,
        libraries/clib/native/Makefile.am,
        libraries/clib/net/Makefile.am,
        libraries/clib/nio/Makefile.am,
        libraries/clib/security/Makefile.am,
        libraries/clib/zip/Makefile.am:
	(*_LDFLAGS) Added -no-undefined.
	(*_DEPENDENCIES) Added libkaffevm.

2005-03-29  Guilhem Lavaux  <guilhem@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c
	(helper_select): Use KSELECT instead of select.
	(select): Use GetStaticMethodID as the method is static.

2005-03-28  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/systems/unix-pthreads/thread-impl.c
	(jthreadInitialized): New static variable.
	(jthread_init): Set jthreadInitialized.
	(jthread_current): Return NULL if jthreadInitialized is false.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-03-28  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/string.c
	(stringWalk): Mark the object lock also.

	Reported by: gian paolo ciceri <gp.ciceri@acm.org>
	
2005-03-27  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/kaffe.def
	(GETSTATIC, FIELD_IS_CONSTANT): Removed inline optimization because
	final fields can be mutable.

	Reported by:  Daniel Bonniot  <Daniel.Bonniot@inria.fr>

2005-03-27  Gerrit P. Haase <gp@familiehaase.de>

	* include/jsyscall.h: Whitespace cleanups.

2005-03-27  Gerrit P. Haase <gp@familiehaase.de>

	* config/config-std.h: Removed whitespace from copyright header.
	Don't include windows specific headers on Cygwin.

2005-03-26  Ito Kazumitsu  <kaz@maczuka.gcd.org>

        * java/text/DecimalFormat.java (parse):
        Check whether the positive suffix matches the pattern. 

2005-03-26  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/lookup.c
	(getField): Update cname with the class name contained in the pool
	if getClass fails.

	* kaffe/kaffevm/constants.h: ConstSlot should be uintp as most of
	constants are pointers.

2005-03-26  Guilhem Lavaux  <guilhem@kaffe.org>

	* kaffe/kaffevm/lookup.c
	(getField): Use the resolved class name to get the name.

	Reported by:  Daniel Bonniot  <Daniel.Bonniot@inria.fr>

2005-03-26  Supreet Sethi  <supreet@linux-delhi.org>,
	    Dalibor Topic  <robilad@kaffe.org>

	* config/i386/atomic.h: Added checks for headers,
	include statement for <inttypes.h> and checks for
	fast types to fix build on FreeBSD 4.x.

2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c:
	Moved include statement for config.h to the top to
	fix the build on Darwin6.

	Reported by:  Riccardo Mottola <zuse@libero.it>

2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/kaffevm/kaffe.def: (GETSTATIC) Cast
	short constants to jshort before moving them.

	Reported by:  Daniel Bonniot  <Daniel.Bonniot@inria.fr>

2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/nio/gnu_java_nio_VMSelector.c:
	Include <sys/types.h> to fix build on OS X.

	Reported by Michael Franz <mvfranz@gmail.com>

2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* TODO: Added new integration tasks.

2005-03-25  Jim Huang  <jserv@kaffe.org>

	* po/kaffe.pot,
	po/fr.po,
	po/zh_TW.po,
	kaffe/kaffe/main.c (usage):
	Tweak usage messages about Nano-X backend.
	
2005-03-25  Antonio Tringali  <antonio.tringali@aliceposta.it>

	* kaffe/kaffevm/soft.c: (soft_cvtfi) Compare float against
	floating point constants to fix SIGILL on mips-linux.
	
2005-03-25  Bryan Østergaard  <kloeri@gentoo.org>

	Warning fixes for alpha-linux.
	
	* kaffe/kaffeh/kaffeh-support.h,
	kaffe/kaffeh/support.c: (addCode, addLineNumbers,
	addLocalVariables, addCheckedExceptions): Use size_t 
	instead of uint32 for len parameter.

	* kaffe/kaffevm/classMethod.c,
	kaffe/kaffevm/classMethod.h: (addInnerClasses) Use size_t 
	instead of uint32 for len parameter.

	* kaffe/kaffevm/code.c,
	kaffe/kaffevm/code.h: (addCode, addLineNumbers, 
	addLocalVariables, addCheckedExceptions) Use size_t 
	instead of uint32 for len parameter.

2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/kaffevm/readClass.c (readAttributes): 
	Cast len to size_t to avoid new warnings on 64 bit platforms.

2005-03-25  Wolfgang Baer  <WBaer@gmx.de>,
	    Arnaud Vandyck  <avdyk@gnu.org>

	* kaffe/man/kaffe.1.xml: New file.
	* kaffe/man/kaffe.1.in: Regenerated.
	
2005-03-25  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/man/Makefile.am (EXTRA_DIST): Added kaffe.1.xml.
	Added rule to create man page from DocBook source.
	
2005-03-24  Dalibor Topic  <robilad@kaffe.org>

	* config/Makefile.am: (EXTRA_DIST) Replaced mips/atomicity.h
	by mips/atomic.h.

2005-03-25  Jim Huang  <jserv@kaffe.org>

	Resynced with GNU Classpath.
	This change is useful to get RSSOwl working.

	2005-03-21  Sven de Marothy  <sven@physto.se>

	* gnu/classpath/SystemProperties.java:
	Add missing aliases for "UnicodeBigUnmarked" and
	"UnicodeLittleUnmarked".

2005-03-24  Thiemo Seufer <ths@networkno.de>

	* config/mips/atomic.h: New glibc-style implementation.
	* config/mips/atomicity.h: Removed.
	* config/mips/common.h: Include atomic.h rather than atomicity.h.
	* config/mips/callKaffeException.h, config/mips/trampolines.S,
	config/mips/jit.h, config/mips/jit3-icode.h, config/mips/jit3-icode.h:
	Fixed some minor typos and inefficiencies.

2005-03-24  Dalibor Topic  <robilad@kaffe.org>

	* TODO: Removed all nasty bugs, as they were all fixed. Wow!
	Looks like the release is really getting closer.

2005-03-24  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/Makefile.am.in (EXTRA_DIST, dist-hook):
	Copy source code manually to avoid automake bugs. This fixes
	make distcheck again.

2005-03-24  Dalibor Topic  <robilad@kaffe.org>

	* config/sparc/atomic-sparc32.h: Removed glibc specific tags
	that broke build on sparc.

2005-03-23  Dalibor Topic  <robilad@kaffe.org>

	* libraries/clib/classpath/Makefile.am: Added classpath_jawt.h
	to sources. Fixes a make distcheck problem.

2005-03-23  Dalibor Topic  <robilad@kaffe.org>

        * kaffe/scripts/javadoc.in,
        kaffe/scripts/compat/javadoc.in: Append installed antlr to
	bootclasspath. Now gjdoccing all of Kaffe's class library
	works out of the box.

2005-03-22  Dalibor Topic  <robilad@kaffe.org>

	* config/mips/common.h: Really include generic atomic primitives.

2005-03-22  Guilhem Lavaux  <guilhem@kaffe.org>,
	    Dalibor Topic  <robilad@kaffe.org>

	* config/arm/common.h: Disabled atomicity.h

2005-03-22  Guilhem Lavaux  <guilhem@kaffe.org>

	* config/config.h.in, configure: Regenerated.

	* config/mips/irix5/config.frag: Added need_stack_end=yes

	* configure.ac: Check for need_stack_end in config.frag and
	define SIGALTSTACK_NEEDS_END.

2005-03-22  Guilhem Lavaux  <guilhem@kaffe.org>

	* config/mips/common.h: Disabled atomicity.h

2005-03-22  Guilhem Lavaux  <guilhem@kaffe.org>

	* config/ia64/common.h: Removed the inclusion of atomicity.h

2005-03-22  Dalibor Topic  <robilad@kaffe.org>

	* kaffe/scripts/compat/javadoc.in,
	kaffe/scripts/compat/javadoc.in:
	Added -Xmx512M to parameters used to invoke Kaffe to be able to 
	deal with running javadoc on Kaffe's source tree out of the box.

	* m4/m4/ac_prog_antlr.m4: Fixed antlr.jar test to bail out if 
	no antlr.jar can be found.
	
	Resynced with gjdoc.
	
	2005-03-14  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/java2xhtml/Java2xhtml.java: Added
	license boilerplate; updated copyright and license in usage
	output.

	2005-03-13  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/Main.java: Added method
	execute(String, String[]) and commented-out empty shells for
	additional execute methods.  Thanks to Jerry Haltom.
	
	2005-03-08  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/Main.java: add support for option
	-reflection; disable reflection by default.

	* src/gnu/classpath/tools/gjdoc/RootDocImpl.java: only use
	reflection if enabled on command line.

	2005-03-08  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/ExecutableMemberDocImpl.java:
	properly parse the thrown exception immediately preceding the
	closing semicolon of an interface method declaration.

	Reported by Robert Schuster

	2005-03-04  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/SeeTagImpl.java: Removed bogus
	Thread.dumpStack() invocation.

	Reported by Arnaud Vandyck

	* src/gnu/classpath/tools/gjdoc/Main.java: Pass DocErrorReporter
	in reflected invocation of Doclet's validOptions() method.

	Reported by Christopher Oezbek

	2005-02-21  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/doclets/htmldoclet/HtmlDoclet.java: fix
	support for option -title.

	2005-02-14  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/NotifyingInputStreamReader.java: fixed
	bug #11989: ParseException with -encoding UTF-8.
	
	Reported by Kalle Olavi Niemitalo.

	2005-02-11  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/NotifyingInputStreamReader.java:
	correctly handle remaining undecoded bytes in the input buffer.

	* src/gnu/classpath/tools/MalformedInputEvent.java: added
	toString() method.

	2005-02-11  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/Main.java: do not catch Throwable,
	catch Exception instead so that Errors can fall through.

	2005-02-11  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/Main.java: Also exit with return
	code 1 if the doclet raised any errors.

	2005-02-11  Michael Koch  <konqueror@gmx.de>

	* src/gnu/classpath/tools/gjdoc/Main.java
	(main): Fixed typo.

	2005-02-11  Michael Koch  <konqueror@gmx.de>

	* src/gnu/classpath/tools/gjdoc/Main.java
	(main): Exit with return code of '1' of execution is failing.

	2005-02-10  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/doclets/htmldoclet/HtmlDoclet.java:
	fix private field access.

	2005-02-10  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/doclets/htmldoclet/HtmlDoclet.java:
	force generation of overview page if a single package is
	documented and either -title, -doctitle or -overview has been
	specified.

	2005-02-10  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/gjdoc/Main.java: output warning when
	option -classpath hasn't been interceptded at the wrapper level;
	add -serialwarn and -nocomment to usage; better usage message for
	-serialwarn.

	* src/gnu/classpath/tools/doclets/htmldoclet/HtmlDoclet.java:
	properly support optiosn -overview and -nocomment.  Replace option
	-noserialwarn with -serialwarn.

	* src/gnu/classpath/tools/doclets/htmldoclet/CssClass.java,
	src/resources/htmldoclet/gjdochtml-clean-layout.css: add new style
	for overview page.

	2005-02-09  Julian Scheid  <julian@sektor37.de>

	* m4/ac_prog_antlr.m4: if $ANTLR_JAR is set, use that for locating
	antlr.jar; complain if $ANTLR_JAR specifies a non-existing file.

	* configure.ac: set autoconf prerequisite version to 2.59; set
	config macro directory; accept option --with-antlr-jar.

	2005-02-08  Julian Scheid  <julian@sektor37.de>

	* src/gnu/classpath/tools/doclets/AbstractDoclet.java:
	* src/gnu/classpath/tools/gjdoc/ClassDocImpl.java:
	* src/gnu/classpath/tools/gjdoc/InheritDocTagImpl.java:
	* src/gnu/classpath/tools/gjdoc/Parser.java:
	* src/gnu/classpath/tools/gjdoc/RootDocImpl.java:
	* src/gnu/classpath/tools/gjdoc/TagImpl.java:
	refactor so that jikes doesn't warn anymore.

	* src/gnu/classpath/tools/doclets/htmldoclet/HtmlDoclet.java:
	* src/gnu/classpath/tools/doclets/htmldoclet/CssClass.java:
	* src/resources/htmldoclet/gjdochtml-clean-layout.css:
	some HTML output and CSS refactoring

	* src/gnu/classpath/tools/java2xhtml/Java2xhtml.java:
	s/numerical/numeric/g

2005-03-22  Dalibor Topic  <robilad@kaffe.org>

	* libraries/javalib/gnu/classpath/VMSystemProperties.java (VMSystemProperties): 
	Set build.compiler to jikes to allow out of the box Tomcat4 JSP examples to run.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-18  Sven de Marothy  <sven@physto.se>

        * java/util/zip/GZIPInputStream.java:
        (GZIPInputStream): Read header in constructor.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-18  Andrew John Hughes  <gnu_andrew@member.fsf.org>

        * gnu/javax/swing/text/html/parser/htmlAttributeSet.java:
        (getAttributeNames()): Replaced 'enum' with 'enumeration'.
        * gnu/javax/swing/text/html/parser/htmlValidator.java:
        (validateParameters(TagElement,htmlAttributeSet)):
        Replaced 'enum' with 'enumeration'.
        (validateAttribute(TagElement,htmlAttributeSet,
                           Enumeration,Enumeration)):
        Likewise.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-18  Audrius Meskauskas  <audriusa@bluewin.ch>

        * javax/swing/text/html/parser/Entity.java (getType): New method.
        * javax/swing/text/html/parser/DocumentParser.java:
        Inherit from javax.swing.text.html.parser.Parser.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-18  Robert Schuster  <thebohemian@gmx>

        * native/jni/java-nio/gnu_java_nio_VMSelector.c: Added important
        return statement after throwing exception.

	2005-03-18  Robert Schuster  <thebohemian@gmx>

        * native/jni/java-nio/gnu_java_nio_VMSelector.c: Implemented
    	Java_gnu_java_nio_VMSelector_select.
        * configure.ac: Added check for sys/select.h and strerro_r().

	* libraries/clib/nio/SelectorImpl.c: Removed. Replaced by 
	gnu_java_nio_VMSelector.c.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-17  Chris Burdess  <dog@gnu.org>

        * gnu/xml/dom/html2/DomHTMLDocument.java: Fixed element creation and
        check for HTML/XHTML namespace.

2005-03-21  Dalibor Topic  <robilad@kaffe.org>

	Resynced with GNU Classpath.

	2005-03-16  Archie Cobbs  <archie@dellroad.org>

        * native/jni/java-nio/java_nio_VMDirectByteBuffer.c: use
        global native reference to wrap persistent jclass variable.
        * native/jni/gtk-peer/gnu_java_awt_peer_gtk_GdkPixbufDecoder.c:
        use DeleteLocalRef() to avoid exhausting local native references.

2003-03-20  Dalibor Topic  <robilad@kaffe.org>

	* configure.ac: Check for -mregnames. It lets us use common register 
	names on powerpc, and will hopefully make it simple to have a single 
	assembler trampoline fiole for both darwin and linux.

	* config/powerpc/trampolines.S: Changed powerpc floating point 
	registers names from 'frX' to 'fX' and built fine on ppc-linux.

2003-03-20  Dalibor Topic  <robilad@kaffe.org>

	* configure.ac: Don't check for no-cpp-precomp. It confuses
	libtool on 64 bit platforms to think that -fPIC is not supported, 
	leading to fascinating relinking errors. A better way for older
	darwin release must be found to deal with preprocessor breakage.
	It also lead to tons of pointless warning messages on all systems
	beside the -no-cpp-supporting ones, so it needs to go in this form.

	* replace/Makefile.am (libreplace_la_LDFLAGS): Removed -export-dynamic.

See ChangeLog.16 for earlier changes.
