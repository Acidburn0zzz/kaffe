/*
 * parisc/hpux/md.c
 * HP-UX PArisc specific functions.
 *
 * Copyright (c) 1996, 1997
 *	Transvirtual Technologies, Inc.  All rights reserved.
 *
 * See the file "license.terms" for information on usage and redistribution 
 * of this file. 
 */

   asm(".text \n"
"        .align 4 \n"
"        .EXPORT parisc_threadswitch,ENTRY,PRIV_LEV=3,RTNVAL=GR \n"
"parisc_threadswitch \n"
"        .PROC \n"
"        .CALLINFO FRAME=192 \n"
"        .ENTRY \n"
"        ldo 192(%r30),%r30 \n"
"        stw %r2,-180(0,%r30) \n"
"        stw %r2,-176(0,%r30) \n"
"        stw %r3,-172(0,%r30) \n"
"        stw %r4,-168(0,%r30) \n"
"        stw %r5,-164(0,%r30) \n"
"        stw %r6,-160(0,%r30) \n"
"        stw %r7,-156(0,%r30) \n"
"        stw %r8,-152(0,%r30) \n"
"        stw %r9,-148(0,%r30) \n"
"        stw %r10,-144(0,%r30) \n"
"        stw %r11,-140(0,%r30) \n"
"        stw %r12,-136(0,%r30) \n"
"        stw %r13,-132(0,%r30) \n"
"        stw %r14,-128(0,%r30) \n"
"        stw %r15,-124(0,%r30) \n"
"        stw %r16,-120(0,%r30) \n"
"        stw %r17,-116(0,%r30) \n"
"        stw %r18,-112(0,%r30) \n"
"        ldo -104(%r30),%r1 \n"
"        fstds,ma %fr12,8(0,%r1) \n"
"        fstds,ma %fr13,8(0,%r1) \n"
"        fstds,ma %fr14,8(0,%r1) \n"
"        fstds,ma %fr15,8(0,%r1) \n"
"        fstds,ma %fr16,8(0,%r1) \n"
"        fstds,ma %fr17,8(0,%r1) \n"
"        fstds,ma %fr18,8(0,%r1) \n"
"        fstds,ma %fr19,8(0,%r1) \n"
"        fstds,ma %fr20,8(0,%r1) \n"
"        fstds,ma %fr21,8(0,%r1) \n"
"        stw %r30,0(0,%r26) \n"
"        ldw 0(0,%r25),%r30 \n"
"        ldw -172(0,%r30),%r3 \n"
"        ldw -168(0,%r30),%r4 \n"
"        ldw -164(0,%r30),%r5 \n"
"        ldw -160(0,%r30),%r6 \n"
"        ldw -156(0,%r30),%r7 \n"
"        ldw -152(0,%r30),%r8 \n"
"        ldw -148(0,%r30),%r9 \n"
"        ldw -144(0,%r30),%r10 \n"
"        ldw -140(0,%r30),%r11 \n"
"        ldw -136(0,%r30),%r12 \n"
"        ldw -132(0,%r30),%r13 \n"
"        ldw -128(0,%r30),%r14 \n"
"        ldw -124(0,%r30),%r15 \n"
"        ldw -120(0,%r30),%r16 \n"
"        ldw -116(0,%r30),%r17 \n"
"        ldw -112(0,%r30),%r18 \n"
"        ldo -104(%r30),%r1 \n"
"        fldds,ma 8(0,%r1),%fr12 \n"
"        fldds,ma 8(0,%r1),%fr13 \n"
"        fldds,ma 8(0,%r1),%fr14 \n"
"        fldds,ma 8(0,%r1),%fr15 \n"
"        fldds,ma 8(0,%r1),%fr16 \n"
"        fldds,ma 8(0,%r1),%fr17 \n"
"        fldds,ma 8(0,%r1),%fr18 \n"
"        fldds,ma 8(0,%r1),%fr19 \n"
"        fldds,ma 8(0,%r1),%fr20 \n"
"        fldds,ma 8(0,%r1),%fr21 \n"
"        ldw -180(0,%r30),%r2 \n"
"	comib,<> 0,%r2,__nodyncall \n"
"        nop \n"
"        ldw -176(0,%r30),%r22 \n"
"        ldo -192(%r30),%r30 \n"
"        b,n $$dyncall \n"
"__nodyncall: \n"
"        bv 0(%r2) \n"
"        ldo -192(%r30),%r30 \n"
"        .EXIT \n"
"        .PROCEND \n");
