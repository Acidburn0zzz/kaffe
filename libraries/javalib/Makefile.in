#
# Java core library component.
#
# Copyright (c) 1997, 1998
#      Transvirtual Technologies, Inc.  All rights reserved.
#
# See the file "license.terms" for information on usage and redistribution
# of this file.
#
# Class library's are not currently part of the integrate Make cycle.
#

srcdir=         @srcdir@
prefix=		@prefix@
classdir=	@datadir@/kaffe
INSTROOT=	@INSTROOT@

INSTALL=        @INSTALL@
INSTALL_DATA=	@INSTALL_DATA@
MKDIR=		@MKDIR@
TOUCH=		touch
MAKEJAVA=	$(srcdir)/makeJava
ZIP=		zip
JAVAC=		javac
JARS=		Klasses.jar pizza.jar

CLASSFILE=	Klasses.jar
SRCDIR=		$(srcdir)
LIBDIR=		lib

all:

install:
		test -d $(INSTROOT)$(classdir) || $(MKDIR) $(INSTROOT)$(classdir)
		for i in $(JARS) ;\
		do \
			if test -f $(srcdir)/$$i ; then $(INSTALL_DATA) $(srcdir)/$$i $(INSTROOT)$(classdir)/$$i ; fi ;\
		done

clean:
		rm -rf $(LIBDIR)

distclean:
		rm -rf $(LIBDIR)
		rm -f Makefile .dir-stamp rebuildLib .depend

classes:	.dir-stamp
		sh rebuildLib

.dir-stamp:
		test -d $(LIBDIR) || $(MKDIR) $(LIBDIR)
		$(TOUCH) .dir-stamp

build-classes:
		rm -f $(srcdir)/$(CLASSFILE) $(LIBDIR)/$(CLASSFILE)
		(cd $(LIBDIR) && $(ZIP) -r $(CLASSFILE) java kaffe)
		mv $(LIBDIR)/$(CLASSFILE) $(srcdir)/$(CLASSFILE)

install-classes:
		test -d $(INSTROOT)$(classdir) || $(MKDIR) $(INSTROOT)$(classdir)
		$(INSTALL_DATA) $(srcdir)/$(CLASSFILE) $(INSTROOT)$(classdir)/$(CLASSFILE)

derived-files:	classes build-classes

# not yet implemented, but must stay to not break make depend
depend:


