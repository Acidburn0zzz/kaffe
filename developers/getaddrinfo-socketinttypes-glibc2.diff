--- patches/getaddrinfo/m4/sockinttypes.m4	2003-04-18 19:33:58.000000000 -0400
+++ kaffe/sockinttypes.m4	2003-06-12 11:19:29.000000000 -0400
@@ -48,7 +48,12 @@
 [AC_CACHE_CHECK([for in_port_t], ac_cv_type_in_port_t,
 [AC_TRY_COMPILE([
 #include <sys/types.h>
-#include <sys/socket.h>],[
+#include <sys/socket.h>
+/* GLIBC defines in_port in netinet/in.h */
+#ifdef HAVE_NETINET_IN_H
+#include <netinet/in.h>
+#endif
+],[
 in_port_t in_port;
 ], [ac_cv_type_in_port_t=yes], [ac_cv_type_in_port_t=no])])
 if test "$ac_cv_type_in_port_t" != yes; then
